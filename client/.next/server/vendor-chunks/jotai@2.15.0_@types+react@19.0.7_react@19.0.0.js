"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/jotai@2.15.0_@types+react@19.0.7_react@19.0.0";
exports.ids = ["vendor-chunks/jotai@2.15.0_@types+react@19.0.7_react@19.0.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react.mjs":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react.mjs ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Provider: () => (/* binding */ Provider),\n/* harmony export */   useAtom: () => (/* binding */ useAtom),\n/* harmony export */   useAtomValue: () => (/* binding */ useAtomValue),\n/* harmony export */   useSetAtom: () => (/* binding */ useSetAtom),\n/* harmony export */   useStore: () => (/* binding */ useStore)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.1.5_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs\");\n/* harmony import */ var jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai/vanilla/internals */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/internals.mjs\");\n/* __next_internal_client_entry_do_not_use__ Provider,useAtom,useAtomValue,useSetAtom,useStore auto */ \n\n\nconst StoreContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nfunction useStore(options) {\n    const store = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(StoreContext);\n    return (options == null ? void 0 : options.store) || store || (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.getDefaultStore)();\n}\nfunction Provider({ children, store }) {\n    const storeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0);\n    if (!store && !storeRef.current) {\n        storeRef.current = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_1__.createStore)();\n    }\n    return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(StoreContext.Provider, {\n        value: store || storeRef.current\n    }, children);\n}\nconst isPromiseLike = (x)=>typeof (x == null ? void 0 : x.then) === \"function\";\nconst attachPromiseStatus = (promise)=>{\n    if (!promise.status) {\n        promise.status = \"pending\";\n        promise.then((v)=>{\n            promise.status = \"fulfilled\";\n            promise.value = v;\n        }, (e)=>{\n            promise.status = \"rejected\";\n            promise.reason = e;\n        });\n    }\n};\nconst use = react__WEBPACK_IMPORTED_MODULE_0__.use || // A shim for older React versions\n((promise)=>{\n    if (promise.status === \"pending\") {\n        throw promise;\n    } else if (promise.status === \"fulfilled\") {\n        return promise.value;\n    } else if (promise.status === \"rejected\") {\n        throw promise.reason;\n    } else {\n        attachPromiseStatus(promise);\n        throw promise;\n    }\n});\nconst continuablePromiseMap = /* @__PURE__ */ new WeakMap();\nconst createContinuablePromise = (promise, getValue)=>{\n    let continuablePromise = continuablePromiseMap.get(promise);\n    if (!continuablePromise) {\n        continuablePromise = new Promise((resolve, reject)=>{\n            let curr = promise;\n            const onFulfilled = (me)=>(v)=>{\n                    if (curr === me) {\n                        resolve(v);\n                    }\n                };\n            const onRejected = (me)=>(e)=>{\n                    if (curr === me) {\n                        reject(e);\n                    }\n                };\n            const onAbort = ()=>{\n                try {\n                    const nextValue = getValue();\n                    if (isPromiseLike(nextValue)) {\n                        continuablePromiseMap.set(nextValue, continuablePromise);\n                        curr = nextValue;\n                        nextValue.then(onFulfilled(nextValue), onRejected(nextValue));\n                        (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_registerAbortHandler)(nextValue, onAbort);\n                    } else {\n                        resolve(nextValue);\n                    }\n                } catch (e) {\n                    reject(e);\n                }\n            };\n            promise.then(onFulfilled(promise), onRejected(promise));\n            (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_2__.INTERNAL_registerAbortHandler)(promise, onAbort);\n        });\n        continuablePromiseMap.set(promise, continuablePromise);\n    }\n    return continuablePromise;\n};\nfunction useAtomValue(atom, options) {\n    const { delay, unstable_promiseStatus: promiseStatus = !react__WEBPACK_IMPORTED_MODULE_0__.use } = options || {};\n    const store = useStore(options);\n    const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)({\n        \"useAtomValue.useReducer\": (prev)=>{\n            const nextValue = store.get(atom);\n            if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n                return prev;\n            }\n            return [\n                nextValue,\n                store,\n                atom\n            ];\n        }\n    }[\"useAtomValue.useReducer\"], void 0, {\n        \"useAtomValue.useReducer\": ()=>[\n                store.get(atom),\n                store,\n                atom\n            ]\n    }[\"useAtomValue.useReducer\"]);\n    let value = valueFromReducer;\n    if (storeFromReducer !== store || atomFromReducer !== atom) {\n        rerender();\n        value = store.get(atom);\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAtomValue.useEffect\": ()=>{\n            const unsub = store.sub(atom, {\n                \"useAtomValue.useEffect.unsub\": ()=>{\n                    if (promiseStatus) {\n                        try {\n                            const value2 = store.get(atom);\n                            if (isPromiseLike(value2)) {\n                                attachPromiseStatus(createContinuablePromise(value2, {\n                                    \"useAtomValue.useEffect.unsub\": ()=>store.get(atom)\n                                }[\"useAtomValue.useEffect.unsub\"]));\n                            }\n                        } catch (e) {}\n                    }\n                    if (typeof delay === \"number\") {\n                        setTimeout(rerender, delay);\n                        return;\n                    }\n                    rerender();\n                }\n            }[\"useAtomValue.useEffect.unsub\"]);\n            rerender();\n            return unsub;\n        }\n    }[\"useAtomValue.useEffect\"], [\n        store,\n        atom,\n        delay,\n        promiseStatus\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(value);\n    if (isPromiseLike(value)) {\n        const promise = createContinuablePromise(value, ()=>store.get(atom));\n        if (promiseStatus) {\n            attachPromiseStatus(promise);\n        }\n        return use(promise);\n    }\n    return value;\n}\nfunction useSetAtom(atom, options) {\n    const store = useStore(options);\n    const setAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSetAtom.useCallback[setAtom]\": (...args)=>{\n            if (( false ? 0 : void 0) !== \"production\" && !(\"write\" in atom)) {\n                throw new Error(\"not writable atom\");\n            }\n            return store.set(atom, ...args);\n        }\n    }[\"useSetAtom.useCallback[setAtom]\"], [\n        store,\n        atom\n    ]);\n    return setAtom;\n}\nfunction useAtom(atom, options) {\n    return [\n        useAtomValue(atom, options),\n        // We do wrong type assertion here, which results in throwing an error.\n        useSetAtom(atom, options)\n    ];\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vcmVhY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O3VHQUNtSTtBQUN0RTtBQUNXO0FBRXhFLE1BQU1ZLDZCQUFlWCxvREFBYUEsQ0FDaEMsS0FBSztBQUVQLFNBQVNZLFNBQVNDLE9BQU87SUFDdkIsTUFBTUMsUUFBUWIsaURBQVVBLENBQUNVO0lBQ3pCLE9BQU8sQ0FBQ0UsV0FBVyxPQUFPLEtBQUssSUFBSUEsUUFBUUMsS0FBSyxLQUFLQSxTQUFTTiw4REFBZUE7QUFDL0U7QUFDQSxTQUFTTyxTQUFTLEVBQ2hCQyxRQUFRLEVBQ1JGLEtBQUssRUFDTjtJQUNDLE1BQU1HLFdBQVdmLDZDQUFNQSxDQUFDLEtBQUs7SUFDN0IsSUFBSSxDQUFDWSxTQUFTLENBQUNHLFNBQVNDLE9BQU8sRUFBRTtRQUMvQkQsU0FBU0MsT0FBTyxHQUFHVCwwREFBV0E7SUFDaEM7SUFDQSxxQkFBT04sb0RBQWFBLENBQ2xCUSxhQUFhSSxRQUFRLEVBQ3JCO1FBQ0VJLE9BQU9MLFNBQVNHLFNBQVNDLE9BQU87SUFDbEMsR0FDQUY7QUFFSjtBQUVBLE1BQU1JLGdCQUFnQixDQUFDQyxJQUFNLE9BQVFBLENBQUFBLEtBQUssT0FBTyxLQUFLLElBQUlBLEVBQUVDLElBQUksTUFBTTtBQUN0RSxNQUFNQyxzQkFBc0IsQ0FBQ0M7SUFDM0IsSUFBSSxDQUFDQSxRQUFRQyxNQUFNLEVBQUU7UUFDbkJELFFBQVFDLE1BQU0sR0FBRztRQUNqQkQsUUFBUUYsSUFBSSxDQUNWLENBQUNJO1lBQ0NGLFFBQVFDLE1BQU0sR0FBRztZQUNqQkQsUUFBUUwsS0FBSyxHQUFHTztRQUNsQixHQUNBLENBQUNDO1lBQ0NILFFBQVFDLE1BQU0sR0FBRztZQUNqQkQsUUFBUUksTUFBTSxHQUFHRDtRQUNuQjtJQUVKO0FBQ0Y7QUFDQSxN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QU05QyxNQUFNcUIsR0FBRyxDQUFDWTs7NEJBRXJEO3dCQUNGLEVBQUUsT0FBT3BCLEdBQUcsQ0FDWjtvQkFDRjtvQkFDQSxJQUFJLE9BQU9xQixVQUFVLFVBQVU7d0JBQzdCYSxXQUFXUCxVQUFVTjt3QkFDckI7b0JBQ0Y7b0JBQ0FNO2dCQUNGOztZQUNBQTtZQUNBLE9BQU9JO1FBQ1Q7aUNBQUc7UUFBQzVDO1FBQU9pQztRQUFNQztRQUFPRTtLQUFjO0lBQ3RDNUMsb0RBQWFBLENBQUNhO0lBQ2QsSUFBSUMsY0FBY0QsUUFBUTtRQUN4QixNQUFNSyxVQUFVUSx5QkFBeUJiLE9BQU8sSUFBTUwsTUFBTXFCLEdBQUcsQ0FBQ1k7UUFDaEUsSUFBSUcsZUFBZTtZQUNqQjNCLG9CQUFvQkM7UUFDdEI7UUFDQSxPQUFPSyxJQUFJTDtJQUNiO0lBQ0EsT0FBT0w7QUFDVDtBQUVBLFNBQVMyQyxXQUFXZixJQUFJLEVBQUVsQyxPQUFPO0lBQy9CLE1BQU1DLFFBQVFGLFNBQVNDO0lBQ3ZCLE1BQU1rRCxVQUFVeEQsa0RBQVdBOzJDQUN6QixDQUFDLEdBQUd5RDtZQUNGLElBQUksQ0FBQyxNQUFlLEdBQUcsQ0FBb0IsR0FBRyxLQUFLLE9BQU8sZ0JBQWdCLENBQUUsWUFBV2pCLElBQUcsR0FBSTtnQkFDNUYsTUFBTSxJQUFJb0IsTUFBTTtZQUNsQjtZQUNBLE9BQU9yRCxNQUFNK0IsR0FBRyxDQUFDRSxTQUFTaUI7UUFDNUI7MENBQ0E7UUFBQ2xEO1FBQU9pQztLQUFLO0lBRWYsT0FBT2dCO0FBQ1Q7QUFFQSxTQUFTSyxRQUFRckIsSUFBSSxFQUFFbEMsT0FBTztJQUM1QixPQUFPO1FBQ0xpQyxhQUFhQyxNQUFNbEM7UUFDbkIsdUVBQXVFO1FBQ3ZFaUQsV0FBV2YsTUFBTWxDO0tBQ2xCO0FBQ0g7QUFFaUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qaWF3ZW56aHUvRGV2ZWxvcGVyL0phc3RhbGtfdmFwaS9jbGllbnQvbm9kZV9tb2R1bGVzLy5wbnBtL2pvdGFpQDIuMTUuMF9AdHlwZXMrcmVhY3RAMTkuMC43X3JlYWN0QDE5LjAuMC9ub2RlX21vZHVsZXMvam90YWkvZXNtL3JlYWN0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlUmVmLCBjcmVhdGVFbGVtZW50LCB1c2VSZWR1Y2VyLCB1c2VFZmZlY3QsIHVzZURlYnVnVmFsdWUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFN0b3JlLCBjcmVhdGVTdG9yZSB9IGZyb20gJ2pvdGFpL3ZhbmlsbGEnO1xuaW1wb3J0IHsgSU5URVJOQUxfcmVnaXN0ZXJBYm9ydEhhbmRsZXIgfSBmcm9tICdqb3RhaS92YW5pbGxhL2ludGVybmFscyc7XG5cbmNvbnN0IFN0b3JlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoXG4gIHZvaWQgMFxuKTtcbmZ1bmN0aW9uIHVzZVN0b3JlKG9wdGlvbnMpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VDb250ZXh0KFN0b3JlQ29udGV4dCk7XG4gIHJldHVybiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5zdG9yZSkgfHwgc3RvcmUgfHwgZ2V0RGVmYXVsdFN0b3JlKCk7XG59XG5mdW5jdGlvbiBQcm92aWRlcih7XG4gIGNoaWxkcmVuLFxuICBzdG9yZVxufSkge1xuICBjb25zdCBzdG9yZVJlZiA9IHVzZVJlZih2b2lkIDApO1xuICBpZiAoIXN0b3JlICYmICFzdG9yZVJlZi5jdXJyZW50KSB7XG4gICAgc3RvcmVSZWYuY3VycmVudCA9IGNyZWF0ZVN0b3JlKCk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoXG4gICAgU3RvcmVDb250ZXh0LlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBzdG9yZSB8fCBzdG9yZVJlZi5jdXJyZW50XG4gICAgfSxcbiAgICBjaGlsZHJlblxuICApO1xufVxuXG5jb25zdCBpc1Byb21pc2VMaWtlID0gKHgpID0+IHR5cGVvZiAoeCA9PSBudWxsID8gdm9pZCAwIDogeC50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xuY29uc3QgYXR0YWNoUHJvbWlzZVN0YXR1cyA9IChwcm9taXNlKSA9PiB7XG4gIGlmICghcHJvbWlzZS5zdGF0dXMpIHtcbiAgICBwcm9taXNlLnN0YXR1cyA9IFwicGVuZGluZ1wiO1xuICAgIHByb21pc2UudGhlbihcbiAgICAgICh2KSA9PiB7XG4gICAgICAgIHByb21pc2Uuc3RhdHVzID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgICAgcHJvbWlzZS52YWx1ZSA9IHY7XG4gICAgICB9LFxuICAgICAgKGUpID0+IHtcbiAgICAgICAgcHJvbWlzZS5zdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICAgIHByb21pc2UucmVhc29uID0gZTtcbiAgICAgIH1cbiAgICApO1xuICB9XG59O1xuY29uc3QgdXNlID0gUmVhY3QudXNlIHx8IC8vIEEgc2hpbSBmb3Igb2xkZXIgUmVhY3QgdmVyc2lvbnNcbigocHJvbWlzZSkgPT4ge1xuICBpZiAocHJvbWlzZS5zdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgdGhyb3cgcHJvbWlzZTtcbiAgfSBlbHNlIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgIHJldHVybiBwcm9taXNlLnZhbHVlO1xuICB9IGVsc2UgaWYgKHByb21pc2Uuc3RhdHVzID09PSBcInJlamVjdGVkXCIpIHtcbiAgICB0aHJvdyBwcm9taXNlLnJlYXNvbjtcbiAgfSBlbHNlIHtcbiAgICBhdHRhY2hQcm9taXNlU3RhdHVzKHByb21pc2UpO1xuICAgIHRocm93IHByb21pc2U7XG4gIH1cbn0pO1xuY29uc3QgY29udGludWFibGVQcm9taXNlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBjcmVhdGVDb250aW51YWJsZVByb21pc2UgPSAocHJvbWlzZSwgZ2V0VmFsdWUpID0+IHtcbiAgbGV0IGNvbnRpbnVhYmxlUHJvbWlzZSA9IGNvbnRpbnVhYmxlUHJvbWlzZU1hcC5nZXQocHJvbWlzZSk7XG4gIGlmICghY29udGludWFibGVQcm9taXNlKSB7XG4gICAgY29udGludWFibGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGN1cnIgPSBwcm9taXNlO1xuICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSAobWUpID0+ICh2KSA9PiB7XG4gICAgICAgIGlmIChjdXJyID09PSBtZSkge1xuICAgICAgICAgIHJlc29sdmUodik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCBvblJlamVjdGVkID0gKG1lKSA9PiAoZSkgPT4ge1xuICAgICAgICBpZiAoY3VyciA9PT0gbWUpIHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCBvbkFib3J0ID0gKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5leHRWYWx1ZSA9IGdldFZhbHVlKCk7XG4gICAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UobmV4dFZhbHVlKSkge1xuICAgICAgICAgICAgY29udGludWFibGVQcm9taXNlTWFwLnNldChuZXh0VmFsdWUsIGNvbnRpbnVhYmxlUHJvbWlzZSk7XG4gICAgICAgICAgICBjdXJyID0gbmV4dFZhbHVlO1xuICAgICAgICAgICAgbmV4dFZhbHVlLnRoZW4ob25GdWxmaWxsZWQobmV4dFZhbHVlKSwgb25SZWplY3RlZChuZXh0VmFsdWUpKTtcbiAgICAgICAgICAgIElOVEVSTkFMX3JlZ2lzdGVyQWJvcnRIYW5kbGVyKG5leHRWYWx1ZSwgb25BYm9ydCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUobmV4dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBwcm9taXNlLnRoZW4ob25GdWxmaWxsZWQocHJvbWlzZSksIG9uUmVqZWN0ZWQocHJvbWlzZSkpO1xuICAgICAgSU5URVJOQUxfcmVnaXN0ZXJBYm9ydEhhbmRsZXIocHJvbWlzZSwgb25BYm9ydCk7XG4gICAgfSk7XG4gICAgY29udGludWFibGVQcm9taXNlTWFwLnNldChwcm9taXNlLCBjb250aW51YWJsZVByb21pc2UpO1xuICB9XG4gIHJldHVybiBjb250aW51YWJsZVByb21pc2U7XG59O1xuZnVuY3Rpb24gdXNlQXRvbVZhbHVlKGF0b20sIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBkZWxheSwgdW5zdGFibGVfcHJvbWlzZVN0YXR1czogcHJvbWlzZVN0YXR1cyA9ICFSZWFjdC51c2UgfSA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUob3B0aW9ucyk7XG4gIGNvbnN0IFtbdmFsdWVGcm9tUmVkdWNlciwgc3RvcmVGcm9tUmVkdWNlciwgYXRvbUZyb21SZWR1Y2VyXSwgcmVyZW5kZXJdID0gdXNlUmVkdWNlcihcbiAgICAocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gc3RvcmUuZ2V0KGF0b20pO1xuICAgICAgaWYgKE9iamVjdC5pcyhwcmV2WzBdLCBuZXh0VmFsdWUpICYmIHByZXZbMV0gPT09IHN0b3JlICYmIHByZXZbMl0gPT09IGF0b20pIHtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9XG4gICAgICByZXR1cm4gW25leHRWYWx1ZSwgc3RvcmUsIGF0b21dO1xuICAgIH0sXG4gICAgdm9pZCAwLFxuICAgICgpID0+IFtzdG9yZS5nZXQoYXRvbSksIHN0b3JlLCBhdG9tXVxuICApO1xuICBsZXQgdmFsdWUgPSB2YWx1ZUZyb21SZWR1Y2VyO1xuICBpZiAoc3RvcmVGcm9tUmVkdWNlciAhPT0gc3RvcmUgfHwgYXRvbUZyb21SZWR1Y2VyICE9PSBhdG9tKSB7XG4gICAgcmVyZW5kZXIoKTtcbiAgICB2YWx1ZSA9IHN0b3JlLmdldChhdG9tKTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3ViKGF0b20sICgpID0+IHtcbiAgICAgIGlmIChwcm9taXNlU3RhdHVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUyID0gc3RvcmUuZ2V0KGF0b20pO1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlMikpIHtcbiAgICAgICAgICAgIGF0dGFjaFByb21pc2VTdGF0dXMoXG4gICAgICAgICAgICAgIGNyZWF0ZUNvbnRpbnVhYmxlUHJvbWlzZSh2YWx1ZTIsICgpID0+IHN0b3JlLmdldChhdG9tKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGVsYXkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgc2V0VGltZW91dChyZXJlbmRlciwgZGVsYXkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXJlbmRlcigpO1xuICAgIH0pO1xuICAgIHJlcmVuZGVyKCk7XG4gICAgcmV0dXJuIHVuc3ViO1xuICB9LCBbc3RvcmUsIGF0b20sIGRlbGF5LCBwcm9taXNlU3RhdHVzXSk7XG4gIHVzZURlYnVnVmFsdWUodmFsdWUpO1xuICBpZiAoaXNQcm9taXNlTGlrZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBwcm9taXNlID0gY3JlYXRlQ29udGludWFibGVQcm9taXNlKHZhbHVlLCAoKSA9PiBzdG9yZS5nZXQoYXRvbSkpO1xuICAgIGlmIChwcm9taXNlU3RhdHVzKSB7XG4gICAgICBhdHRhY2hQcm9taXNlU3RhdHVzKHByb21pc2UpO1xuICAgIH1cbiAgICByZXR1cm4gdXNlKHByb21pc2UpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0QXRvbShhdG9tLCBvcHRpb25zKSB7XG4gIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUob3B0aW9ucyk7XG4gIGNvbnN0IHNldEF0b20gPSB1c2VDYWxsYmFjayhcbiAgICAoLi4uYXJncykgPT4ge1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmICEoXCJ3cml0ZVwiIGluIGF0b20pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCB3cml0YWJsZSBhdG9tXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0b3JlLnNldChhdG9tLCAuLi5hcmdzKTtcbiAgICB9LFxuICAgIFtzdG9yZSwgYXRvbV1cbiAgKTtcbiAgcmV0dXJuIHNldEF0b207XG59XG5cbmZ1bmN0aW9uIHVzZUF0b20oYXRvbSwgb3B0aW9ucykge1xuICByZXR1cm4gW1xuICAgIHVzZUF0b21WYWx1ZShhdG9tLCBvcHRpb25zKSxcbiAgICAvLyBXZSBkbyB3cm9uZyB0eXBlIGFzc2VydGlvbiBoZXJlLCB3aGljaCByZXN1bHRzIGluIHRocm93aW5nIGFuIGVycm9yLlxuICAgIHVzZVNldEF0b20oYXRvbSwgb3B0aW9ucylcbiAgXTtcbn1cblxuZXhwb3J0IHsgUHJvdmlkZXIsIHVzZUF0b20sIHVzZUF0b21WYWx1ZSwgdXNlU2V0QXRvbSwgdXNlU3RvcmUgfTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlUmVmIiwiY3JlYXRlRWxlbWVudCIsInVzZVJlZHVjZXIiLCJ1c2VFZmZlY3QiLCJ1c2VEZWJ1Z1ZhbHVlIiwidXNlQ2FsbGJhY2siLCJnZXREZWZhdWx0U3RvcmUiLCJjcmVhdGVTdG9yZSIsIklOVEVSTkFMX3JlZ2lzdGVyQWJvcnRIYW5kbGVyIiwiU3RvcmVDb250ZXh0IiwidXNlU3RvcmUiLCJvcHRpb25zIiwic3RvcmUiLCJQcm92aWRlciIsImNoaWxkcmVuIiwic3RvcmVSZWYiLCJjdXJyZW50IiwidmFsdWUiLCJpc1Byb21pc2VMaWtlIiwieCIsInRoZW4iLCJhdHRhY2hQcm9taXNlU3RhdHVzIiwicHJvbWlzZSIsInN0YXR1cyIsInYiLCJlIiwicmVhc29uIiwidXNlIiwiY29udGludWFibGVQcm9taXNlTWFwIiwiV2Vha01hcCIsImNyZWF0ZUNvbnRpbnVhYmxlUHJvbWlzZSIsImdldFZhbHVlIiwiY29udGludWFibGVQcm9taXNlIiwiZ2V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjdXJyIiwib25GdWxmaWxsZWQiLCJtZSIsIm9uUmVqZWN0ZWQiLCJvbkFib3J0IiwibmV4dFZhbHVlIiwic2V0IiwidXNlQXRvbVZhbHVlIiwiYXRvbSIsImRlbGF5IiwidW5zdGFibGVfcHJvbWlzZVN0YXR1cyIsInByb21pc2VTdGF0dXMiLCJ2YWx1ZUZyb21SZWR1Y2VyIiwic3RvcmVGcm9tUmVkdWNlciIsImF0b21Gcm9tUmVkdWNlciIsInJlcmVuZGVyIiwicHJldiIsIk9iamVjdCIsImlzIiwidW5zdWIiLCJzdWIiLCJ2YWx1ZTIiLCJzZXRUaW1lb3V0IiwidXNlU2V0QXRvbSIsInNldEF0b20iLCJhcmdzIiwiZW52IiwiTU9ERSIsIkVycm9yIiwidXNlQXRvbSJdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react/utils.mjs":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react/utils.mjs ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAtomCallback: () => (/* binding */ useAtomCallback),\n/* harmony export */   useHydrateAtoms: () => (/* binding */ useHydrateAtoms),\n/* harmony export */   useReducerAtom: () => (/* binding */ useReducerAtom),\n/* harmony export */   useResetAtom: () => (/* binding */ useResetAtom)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.1.5_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var jotai_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jotai/react */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react.mjs\");\n/* harmony import */ var jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jotai/vanilla/utils */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/utils.mjs\");\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs\");\n/* __next_internal_client_entry_do_not_use__ useAtomCallback,useHydrateAtoms,useReducerAtom,useResetAtom auto */ \n\n\n\nfunction useResetAtom(anAtom, options) {\n    const setAtom = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n    const resetAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useResetAtom.useCallback[resetAtom]\": ()=>setAtom(jotai_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__.RESET)\n    }[\"useResetAtom.useCallback[resetAtom]\"], [\n        setAtom\n    ]);\n    return resetAtom;\n}\nfunction useReducerAtom(anAtom, reducer, options) {\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn(\"[DEPRECATED] useReducerAtom is deprecated and will be removed in the future. Please create your own version using the recipe. https://github.com/pmndrs/jotai/pull/2467\");\n    }\n    const [state, setState] = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useAtom)(anAtom, options);\n    const dispatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useReducerAtom.useCallback[dispatch]\": (action)=>{\n            setState({\n                \"useReducerAtom.useCallback[dispatch]\": (prev)=>reducer(prev, action)\n            }[\"useReducerAtom.useCallback[dispatch]\"]);\n        }\n    }[\"useReducerAtom.useCallback[dispatch]\"], [\n        setState,\n        reducer\n    ]);\n    return [\n        state,\n        dispatch\n    ];\n}\nfunction useAtomCallback(callback, options) {\n    const anAtom = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useAtomCallback.useMemo[anAtom]\": ()=>(0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_3__.atom)(null, {\n                \"useAtomCallback.useMemo[anAtom]\": (get, set, ...args)=>callback(get, set, ...args)\n            }[\"useAtomCallback.useMemo[anAtom]\"])\n    }[\"useAtomCallback.useMemo[anAtom]\"], [\n        callback\n    ]);\n    return (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useSetAtom)(anAtom, options);\n}\nconst hydratedMap = /* @__PURE__ */ new WeakMap();\nfunction useHydrateAtoms(values, options) {\n    const store = (0,jotai_react__WEBPACK_IMPORTED_MODULE_1__.useStore)(options);\n    const hydratedSet = getHydratedSet(store);\n    for (const [atom, ...args] of values){\n        if (!hydratedSet.has(atom) || (options == null ? void 0 : options.dangerouslyForceHydrate)) {\n            hydratedSet.add(atom);\n            store.set(atom, ...args);\n        }\n    }\n}\nconst getHydratedSet = (store)=>{\n    let hydratedSet = hydratedMap.get(store);\n    if (!hydratedSet) {\n        hydratedSet = /* @__PURE__ */ new WeakSet();\n        hydratedMap.set(store, hydratedSet);\n    }\n    return hydratedSet;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vcmVhY3QvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O2lIQUM2QztBQUNlO0FBQ2hCO0FBQ1A7QUFFckMsU0FBU08sYUFBYUMsTUFBTSxFQUFFQyxPQUFPO0lBQ25DLE1BQU1DLFVBQVVSLHVEQUFVQSxDQUFDTSxRQUFRQztJQUNuQyxNQUFNRSxZQUFZWCxrREFBV0E7K0NBQUMsSUFBTVUsUUFBUUwsc0RBQUtBOzhDQUFHO1FBQUNLO0tBQVE7SUFDN0QsT0FBT0M7QUFDVDtBQUVBLFNBQVNDLGVBQWVKLE1BQU0sRUFBRUssT0FBTyxFQUFFSixPQUFPO0lBQzlDLElBQUksQ0FBQyxNQUFlLEdBQUcsQ0FBb0IsR0FBRyxLQUFLLE9BQU8sY0FBYztRQUN0RU8sUUFBUUMsSUFBSSxDQUNWO0lBRUo7SUFDQSxNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FBR2hCLG9EQUFPQSxDQUFDSyxRQUFRQztJQUMxQyxNQUFNVyxXQUFXcEIsa0RBQVdBO2dEQUMxQixDQUFDcUI7WUFDQ0Y7d0RBQVMsQ0FBQ0csT0FBU1QsUUFBUVMsTUFBTUQ7O1FBQ25DOytDQUNBO1FBQUNGO1FBQVVOO0tBQVE7SUFFckIsT0FBTztRQUFDSztRQUFPRTtLQUFTO0FBQzFCO0FBRUEsU0FBU0csZ0JBQWdCQyxRQUFRLEVBQUVmLE9BQU87SUFDeEMsTUFBTUQsU0FBU1AsOENBQU9BOzJDQUNwQixJQUFNSyxtREFBSUEsQ0FBQzttREFBTSxDQUFDbUIsS0FBS0MsS0FBSyxHQUFHQyxPQUFTSCxTQUFTQyxLQUFLQyxRQUFRQzs7MENBQzlEO1FBQUNIO0tBQVM7SUFFWixPQUFPdEIsdURBQVVBLENBQUNNLFFBQVFDO0FBQzVCO0FBRUEsTUFBTW1CLGNBQWMsYUFBYSxHQUFHLElBQUlDO0FBQ3hDLFNBQVNDLGdCQUFnQkMsTUFBTSxFQUFFdEIsT0FBTztJQUN0QyxNQUFNdUIsUUFBUTVCLHFEQUFRQSxDQUFDSztJQUN2QixNQUFNd0IsY0FBY0MsZUFBZUY7SUFDbkMsS0FBSyxNQUFNLENBQUMxQixNQUFNLEdBQUdxQixLQUFLLElBQUlJLE9BQVE7UUFDcEMsSUFBSSxDQUFDRSxZQUFZRSxHQUFHLENBQUM3QixTQUFVRyxDQUFBQSxXQUFXLE9BQU8sS0FBSyxJQUFJQSxRQUFRMkIsdUJBQXVCLEdBQUc7WUFDMUZILFlBQVlJLEdBQUcsQ0FBQy9CO1lBQ2hCMEIsTUFBTU4sR0FBRyxDQUFDcEIsU0FBU3FCO1FBQ3JCO0lBQ0Y7QUFDRjtBQUNBLE1BQU1PLGlCQUFpQixDQUFDRjtJQUN0QixJQUFJQyxjQUFjTCxZQUFZSCxHQUFHLENBQUNPO0lBQ2xDLElBQUksQ0FBQ0MsYUFBYTtRQUNoQkEsY0FBYyxhQUFhLEdBQUcsSUFBSUs7UUFDbENWLFlBQVlGLEdBQUcsQ0FBQ00sT0FBT0M7SUFDekI7SUFDQSxPQUFPQTtBQUNUO0FBRTBFIiwic291cmNlcyI6WyIvVXNlcnMvamlhd2Vuemh1L0RldmVsb3Blci9KYXN0YWxrX3ZhcGkvY2xpZW50L25vZGVfbW9kdWxlcy8ucG5wbS9qb3RhaUAyLjE1LjBfQHR5cGVzK3JlYWN0QDE5LjAuN19yZWFjdEAxOS4wLjAvbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS9yZWFjdC91dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXRBdG9tLCB1c2VBdG9tLCB1c2VTdG9yZSB9IGZyb20gJ2pvdGFpL3JlYWN0JztcbmltcG9ydCB7IFJFU0VUIH0gZnJvbSAnam90YWkvdmFuaWxsYS91dGlscyc7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSAnam90YWkvdmFuaWxsYSc7XG5cbmZ1bmN0aW9uIHVzZVJlc2V0QXRvbShhbkF0b20sIG9wdGlvbnMpIHtcbiAgY29uc3Qgc2V0QXRvbSA9IHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbiAgY29uc3QgcmVzZXRBdG9tID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0QXRvbShSRVNFVCksIFtzZXRBdG9tXSk7XG4gIHJldHVybiByZXNldEF0b207XG59XG5cbmZ1bmN0aW9uIHVzZVJlZHVjZXJBdG9tKGFuQXRvbSwgcmVkdWNlciwgb3B0aW9ucykge1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIltERVBSRUNBVEVEXSB1c2VSZWR1Y2VyQXRvbSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gUGxlYXNlIGNyZWF0ZSB5b3VyIG93biB2ZXJzaW9uIHVzaW5nIHRoZSByZWNpcGUuIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvam90YWkvcHVsbC8yNDY3XCJcbiAgICApO1xuICB9XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlQXRvbShhbkF0b20sIG9wdGlvbnMpO1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZUNhbGxiYWNrKFxuICAgIChhY3Rpb24pID0+IHtcbiAgICAgIHNldFN0YXRlKChwcmV2KSA9PiByZWR1Y2VyKHByZXYsIGFjdGlvbikpO1xuICAgIH0sXG4gICAgW3NldFN0YXRlLCByZWR1Y2VyXVxuICApO1xuICByZXR1cm4gW3N0YXRlLCBkaXNwYXRjaF07XG59XG5cbmZ1bmN0aW9uIHVzZUF0b21DYWxsYmFjayhjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBhbkF0b20gPSB1c2VNZW1vKFxuICAgICgpID0+IGF0b20obnVsbCwgKGdldCwgc2V0LCAuLi5hcmdzKSA9PiBjYWxsYmFjayhnZXQsIHNldCwgLi4uYXJncykpLFxuICAgIFtjYWxsYmFja11cbiAgKTtcbiAgcmV0dXJuIHVzZVNldEF0b20oYW5BdG9tLCBvcHRpb25zKTtcbn1cblxuY29uc3QgaHlkcmF0ZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHVzZUh5ZHJhdGVBdG9tcyh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZShvcHRpb25zKTtcbiAgY29uc3QgaHlkcmF0ZWRTZXQgPSBnZXRIeWRyYXRlZFNldChzdG9yZSk7XG4gIGZvciAoY29uc3QgW2F0b20sIC4uLmFyZ3NdIG9mIHZhbHVlcykge1xuICAgIGlmICghaHlkcmF0ZWRTZXQuaGFzKGF0b20pIHx8IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRhbmdlcm91c2x5Rm9yY2VIeWRyYXRlKSkge1xuICAgICAgaHlkcmF0ZWRTZXQuYWRkKGF0b20pO1xuICAgICAgc3RvcmUuc2V0KGF0b20sIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxufVxuY29uc3QgZ2V0SHlkcmF0ZWRTZXQgPSAoc3RvcmUpID0+IHtcbiAgbGV0IGh5ZHJhdGVkU2V0ID0gaHlkcmF0ZWRNYXAuZ2V0KHN0b3JlKTtcbiAgaWYgKCFoeWRyYXRlZFNldCkge1xuICAgIGh5ZHJhdGVkU2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgaHlkcmF0ZWRNYXAuc2V0KHN0b3JlLCBoeWRyYXRlZFNldCk7XG4gIH1cbiAgcmV0dXJuIGh5ZHJhdGVkU2V0O1xufTtcblxuZXhwb3J0IHsgdXNlQXRvbUNhbGxiYWNrLCB1c2VIeWRyYXRlQXRvbXMsIHVzZVJlZHVjZXJBdG9tLCB1c2VSZXNldEF0b20gfTtcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZU1lbW8iLCJ1c2VTZXRBdG9tIiwidXNlQXRvbSIsInVzZVN0b3JlIiwiUkVTRVQiLCJhdG9tIiwidXNlUmVzZXRBdG9tIiwiYW5BdG9tIiwib3B0aW9ucyIsInNldEF0b20iLCJyZXNldEF0b20iLCJ1c2VSZWR1Y2VyQXRvbSIsInJlZHVjZXIiLCJlbnYiLCJNT0RFIiwiY29uc29sZSIsIndhcm4iLCJzdGF0ZSIsInNldFN0YXRlIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJwcmV2IiwidXNlQXRvbUNhbGxiYWNrIiwiY2FsbGJhY2siLCJnZXQiLCJzZXQiLCJhcmdzIiwiaHlkcmF0ZWRNYXAiLCJXZWFrTWFwIiwidXNlSHlkcmF0ZUF0b21zIiwidmFsdWVzIiwic3RvcmUiLCJoeWRyYXRlZFNldCIsImdldEh5ZHJhdGVkU2V0IiwiaGFzIiwiZGFuZ2Vyb3VzbHlGb3JjZUh5ZHJhdGUiLCJhZGQiLCJXZWFrU2V0Il0sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/react/utils.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_overrideCreateStore: () => (/* binding */ INTERNAL_overrideCreateStore),\n/* harmony export */   atom: () => (/* binding */ atom),\n/* harmony export */   createStore: () => (/* binding */ createStore),\n/* harmony export */   getDefaultStore: () => (/* binding */ getDefaultStore)\n/* harmony export */ });\n/* harmony import */ var jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jotai/vanilla/internals */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/internals.mjs\");\n\n\nlet keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString() {\n      return ( false ? 0 : void 0) !== \"production\" && this.debugLabel ? key + \":\" + this.debugLabel : key;\n    }\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = defaultRead;\n    config.write = defaultWrite;\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\nfunction defaultRead(get) {\n  return get(this);\n}\nfunction defaultWrite(get, set, arg) {\n  return set(\n    this,\n    typeof arg === \"function\" ? arg(get(this)) : arg\n  );\n}\n\nlet overiddenCreateStore;\nfunction INTERNAL_overrideCreateStore(fn) {\n  overiddenCreateStore = fn(overiddenCreateStore);\n}\nfunction createStore() {\n  if (overiddenCreateStore) {\n    return overiddenCreateStore();\n  }\n  return (0,jotai_vanilla_internals__WEBPACK_IMPORTED_MODULE_0__.INTERNAL_buildStoreRev2)();\n}\nlet defaultStore;\nfunction getDefaultStore() {\n  if (!defaultStore) {\n    defaultStore = createStore();\n    if (( false ? 0 : void 0) !== \"production\") {\n      globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = defaultStore);\n      if (globalThis.__JOTAI_DEFAULT_STORE__ !== defaultStore) {\n        console.warn(\n          \"Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044\"\n        );\n      }\n    }\n  }\n  return defaultStore;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0U7O0FBRWxFO0FBQ0E7QUFDQSxxQkFBcUIsV0FBVztBQUNoQztBQUNBO0FBQ0EsY0FBYyxNQUFlLEdBQUcsQ0FBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdGQUF1QjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFlLEdBQUcsQ0FBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTRFIiwic291cmNlcyI6WyIvVXNlcnMvamlhd2Vuemh1L0RldmVsb3Blci9KYXN0YWxrX3ZhcGkvY2xpZW50L25vZGVfbW9kdWxlcy8ucG5wbS9qb3RhaUAyLjE1LjBfQHR5cGVzK3JlYWN0QDE5LjAuN19yZWFjdEAxOS4wLjAvbm9kZV9tb2R1bGVzL2pvdGFpL2VzbS92YW5pbGxhLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlRFUk5BTF9idWlsZFN0b3JlUmV2MiB9IGZyb20gJ2pvdGFpL3ZhbmlsbGEvaW50ZXJuYWxzJztcblxubGV0IGtleUNvdW50ID0gMDtcbmZ1bmN0aW9uIGF0b20ocmVhZCwgd3JpdGUpIHtcbiAgY29uc3Qga2V5ID0gYGF0b20keysra2V5Q291bnR9YDtcbiAgY29uc3QgY29uZmlnID0ge1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgcmV0dXJuIChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmIHRoaXMuZGVidWdMYWJlbCA/IGtleSArIFwiOlwiICsgdGhpcy5kZWJ1Z0xhYmVsIDoga2V5O1xuICAgIH1cbiAgfTtcbiAgaWYgKHR5cGVvZiByZWFkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25maWcucmVhZCA9IHJlYWQ7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLmluaXQgPSByZWFkO1xuICAgIGNvbmZpZy5yZWFkID0gZGVmYXVsdFJlYWQ7XG4gICAgY29uZmlnLndyaXRlID0gZGVmYXVsdFdyaXRlO1xuICB9XG4gIGlmICh3cml0ZSkge1xuICAgIGNvbmZpZy53cml0ZSA9IHdyaXRlO1xuICB9XG4gIHJldHVybiBjb25maWc7XG59XG5mdW5jdGlvbiBkZWZhdWx0UmVhZChnZXQpIHtcbiAgcmV0dXJuIGdldCh0aGlzKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRXcml0ZShnZXQsIHNldCwgYXJnKSB7XG4gIHJldHVybiBzZXQoXG4gICAgdGhpcyxcbiAgICB0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIgPyBhcmcoZ2V0KHRoaXMpKSA6IGFyZ1xuICApO1xufVxuXG5sZXQgb3ZlcmlkZGVuQ3JlYXRlU3RvcmU7XG5mdW5jdGlvbiBJTlRFUk5BTF9vdmVycmlkZUNyZWF0ZVN0b3JlKGZuKSB7XG4gIG92ZXJpZGRlbkNyZWF0ZVN0b3JlID0gZm4ob3ZlcmlkZGVuQ3JlYXRlU3RvcmUpO1xufVxuZnVuY3Rpb24gY3JlYXRlU3RvcmUoKSB7XG4gIGlmIChvdmVyaWRkZW5DcmVhdGVTdG9yZSkge1xuICAgIHJldHVybiBvdmVyaWRkZW5DcmVhdGVTdG9yZSgpO1xuICB9XG4gIHJldHVybiBJTlRFUk5BTF9idWlsZFN0b3JlUmV2MigpO1xufVxubGV0IGRlZmF1bHRTdG9yZTtcbmZ1bmN0aW9uIGdldERlZmF1bHRTdG9yZSgpIHtcbiAgaWYgKCFkZWZhdWx0U3RvcmUpIHtcbiAgICBkZWZhdWx0U3RvcmUgPSBjcmVhdGVTdG9yZSgpO1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyB8fCAoZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyA9IGRlZmF1bHRTdG9yZSk7XG4gICAgICBpZiAoZ2xvYmFsVGhpcy5fX0pPVEFJX0RFRkFVTFRfU1RPUkVfXyAhPT0gZGVmYXVsdFN0b3JlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIkRldGVjdGVkIG11bHRpcGxlIEpvdGFpIGluc3RhbmNlcy4gSXQgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3Igd2l0aCB0aGUgZGVmYXVsdCBzdG9yZS4gaHR0cHM6Ly9naXRodWIuY29tL3BtbmRycy9qb3RhaS9kaXNjdXNzaW9ucy8yMDQ0XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRTdG9yZTtcbn1cblxuZXhwb3J0IHsgSU5URVJOQUxfb3ZlcnJpZGVDcmVhdGVTdG9yZSwgYXRvbSwgY3JlYXRlU3RvcmUsIGdldERlZmF1bHRTdG9yZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/internals.mjs":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/internals.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_abortPromise: () => (/* binding */ abortPromise),\n/* harmony export */   INTERNAL_addPendingPromiseToDependency: () => (/* binding */ addPendingPromiseToDependency),\n/* harmony export */   INTERNAL_buildStoreRev2: () => (/* binding */ buildStore),\n/* harmony export */   INTERNAL_getBuildingBlocksRev2: () => (/* binding */ getBuildingBlocks),\n/* harmony export */   INTERNAL_getMountedOrPendingDependents: () => (/* binding */ getMountedOrPendingDependents),\n/* harmony export */   INTERNAL_hasInitialValue: () => (/* binding */ hasInitialValue),\n/* harmony export */   INTERNAL_initializeStoreHooksRev2: () => (/* binding */ initializeStoreHooks),\n/* harmony export */   INTERNAL_isActuallyWritableAtom: () => (/* binding */ isActuallyWritableAtom),\n/* harmony export */   INTERNAL_isAtomStateInitialized: () => (/* binding */ isAtomStateInitialized),\n/* harmony export */   INTERNAL_isPendingPromise: () => (/* binding */ isPendingPromise),\n/* harmony export */   INTERNAL_isPromiseLike: () => (/* binding */ isPromiseLike),\n/* harmony export */   INTERNAL_promiseStateMap: () => (/* binding */ promiseStateMap),\n/* harmony export */   INTERNAL_registerAbortHandler: () => (/* binding */ registerAbortHandler),\n/* harmony export */   INTERNAL_returnAtomValue: () => (/* binding */ returnAtomValue)\n/* harmony export */ });\nfunction hasInitialValue(atom) {\n  return \"init\" in atom;\n}\nfunction isActuallyWritableAtom(atom) {\n  return !!atom.write;\n}\nfunction isAtomStateInitialized(atomState) {\n  return \"v\" in atomState || \"e\" in atomState;\n}\nfunction returnAtomValue(atomState) {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  if (( false ? 0 : void 0) !== \"production\" && !(\"v\" in atomState)) {\n    throw new Error(\"[Bug] atom state is not initialized\");\n  }\n  return atomState.v;\n}\nconst promiseStateMap = /* @__PURE__ */ new WeakMap();\nfunction isPendingPromise(value) {\n  var _a;\n  return isPromiseLike(value) && !!((_a = promiseStateMap.get(value)) == null ? void 0 : _a[0]);\n}\nfunction abortPromise(promise) {\n  const promiseState = promiseStateMap.get(promise);\n  if (promiseState == null ? void 0 : promiseState[0]) {\n    promiseState[0] = false;\n    promiseState[1].forEach((fn) => fn());\n  }\n}\nfunction registerAbortHandler(promise, abortHandler) {\n  let promiseState = promiseStateMap.get(promise);\n  if (!promiseState) {\n    promiseState = [true, /* @__PURE__ */ new Set()];\n    promiseStateMap.set(promise, promiseState);\n    const settle = () => {\n      promiseState[0] = false;\n    };\n    promise.then(settle, settle);\n  }\n  promiseState[1].add(abortHandler);\n}\nfunction isPromiseLike(p) {\n  return typeof (p == null ? void 0 : p.then) === \"function\";\n}\nfunction addPendingPromiseToDependency(atom, promise, dependencyAtomState) {\n  if (!dependencyAtomState.p.has(atom)) {\n    dependencyAtomState.p.add(atom);\n    const cleanup = () => dependencyAtomState.p.delete(atom);\n    promise.then(cleanup, cleanup);\n  }\n}\nfunction getMountedOrPendingDependents(atom, atomState, mountedMap) {\n  var _a;\n  const dependents = /* @__PURE__ */ new Set();\n  for (const a of ((_a = mountedMap.get(atom)) == null ? void 0 : _a.t) || []) {\n    if (mountedMap.has(a)) {\n      dependents.add(a);\n    }\n  }\n  for (const atomWithPendingPromise of atomState.p) {\n    dependents.add(atomWithPendingPromise);\n  }\n  return dependents;\n}\nconst createStoreHook = () => {\n  const callbacks = /* @__PURE__ */ new Set();\n  const notify = () => callbacks.forEach((fn) => fn());\n  notify.add = (fn) => {\n    callbacks.add(fn);\n    return () => callbacks.delete(fn);\n  };\n  return notify;\n};\nconst createStoreHookForAtoms = () => {\n  const all = {};\n  const callbacks = /* @__PURE__ */ new WeakMap();\n  const notify = (atom) => {\n    var _a, _b;\n    (_a = callbacks.get(all)) == null ? void 0 : _a.forEach((fn) => fn(atom));\n    (_b = callbacks.get(atom)) == null ? void 0 : _b.forEach((fn) => fn());\n  };\n  notify.add = (atom, fn) => {\n    const key = atom || all;\n    const fns = (callbacks.has(key) ? callbacks : callbacks.set(key, /* @__PURE__ */ new Set())).get(key);\n    fns.add(fn);\n    return () => {\n      fns == null ? void 0 : fns.delete(fn);\n      if (!fns.size) {\n        callbacks.delete(key);\n      }\n    };\n  };\n  return notify;\n};\nfunction initializeStoreHooks(storeHooks) {\n  storeHooks.r || (storeHooks.r = createStoreHookForAtoms());\n  storeHooks.c || (storeHooks.c = createStoreHookForAtoms());\n  storeHooks.m || (storeHooks.m = createStoreHookForAtoms());\n  storeHooks.u || (storeHooks.u = createStoreHookForAtoms());\n  storeHooks.f || (storeHooks.f = createStoreHook());\n  return storeHooks;\n}\nconst atomRead = (_store, atom, ...params) => atom.read(...params);\nconst atomWrite = (_store, atom, ...params) => atom.write(...params);\nconst atomOnInit = (store, atom) => {\n  var _a;\n  return (_a = atom.unstable_onInit) == null ? void 0 : _a.call(atom, store);\n};\nconst atomOnMount = (_store, atom, setAtom) => {\n  var _a;\n  return (_a = atom.onMount) == null ? void 0 : _a.call(atom, setAtom);\n};\nconst ensureAtomState = (store, atom) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const atomStateMap = buildingBlocks[0];\n  const atomOnInit2 = buildingBlocks[9];\n  if (( false ? 0 : void 0) !== \"production\" && !atom) {\n    throw new Error(\"Atom is undefined or null\");\n  }\n  let atomState = atomStateMap.get(atom);\n  if (!atomState) {\n    atomState = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 };\n    atomStateMap.set(atom, atomState);\n    atomOnInit2 == null ? void 0 : atomOnInit2(store, atom);\n  }\n  return atomState;\n};\nconst flushCallbacks = (store) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const changedAtoms = buildingBlocks[3];\n  const mountCallbacks = buildingBlocks[4];\n  const unmountCallbacks = buildingBlocks[5];\n  const storeHooks = buildingBlocks[6];\n  const recomputeInvalidatedAtoms2 = buildingBlocks[13];\n  const errors = [];\n  const call = (fn) => {\n    try {\n      fn();\n    } catch (e) {\n      errors.push(e);\n    }\n  };\n  do {\n    if (storeHooks.f) {\n      call(storeHooks.f);\n    }\n    const callbacks = /* @__PURE__ */ new Set();\n    const add = callbacks.add.bind(callbacks);\n    changedAtoms.forEach((atom) => {\n      var _a;\n      return (_a = mountedMap.get(atom)) == null ? void 0 : _a.l.forEach(add);\n    });\n    changedAtoms.clear();\n    unmountCallbacks.forEach(add);\n    unmountCallbacks.clear();\n    mountCallbacks.forEach(add);\n    mountCallbacks.clear();\n    callbacks.forEach(call);\n    if (changedAtoms.size) {\n      recomputeInvalidatedAtoms2(store);\n    }\n  } while (changedAtoms.size || unmountCallbacks.size || mountCallbacks.size);\n  if (errors.length) {\n    throw new AggregateError(errors);\n  }\n};\nconst recomputeInvalidatedAtoms = (store) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const invalidatedAtoms = buildingBlocks[2];\n  const changedAtoms = buildingBlocks[3];\n  const ensureAtomState2 = buildingBlocks[11];\n  const readAtomState2 = buildingBlocks[14];\n  const mountDependencies2 = buildingBlocks[17];\n  const topSortedReversed = [];\n  const visiting = /* @__PURE__ */ new WeakSet();\n  const visited = /* @__PURE__ */ new WeakSet();\n  const stack = Array.from(changedAtoms);\n  while (stack.length) {\n    const a = stack[stack.length - 1];\n    const aState = ensureAtomState2(store, a);\n    if (visited.has(a)) {\n      stack.pop();\n      continue;\n    }\n    if (visiting.has(a)) {\n      if (invalidatedAtoms.get(a) === aState.n) {\n        topSortedReversed.push([a, aState]);\n      } else if (( false ? 0 : void 0) !== \"production\" && invalidatedAtoms.has(a)) {\n        throw new Error(\"[Bug] invalidated atom exists\");\n      }\n      visited.add(a);\n      stack.pop();\n      continue;\n    }\n    visiting.add(a);\n    for (const d of getMountedOrPendingDependents(a, aState, mountedMap)) {\n      if (!visiting.has(d)) {\n        stack.push(d);\n      }\n    }\n  }\n  for (let i = topSortedReversed.length - 1; i >= 0; --i) {\n    const [a, aState] = topSortedReversed[i];\n    let hasChangedDeps = false;\n    for (const dep of aState.d.keys()) {\n      if (dep !== a && changedAtoms.has(dep)) {\n        hasChangedDeps = true;\n        break;\n      }\n    }\n    if (hasChangedDeps) {\n      readAtomState2(store, a);\n      mountDependencies2(store, a);\n    }\n    invalidatedAtoms.delete(a);\n  }\n};\nconst readAtomState = (store, atom) => {\n  var _a, _b;\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const invalidatedAtoms = buildingBlocks[2];\n  const changedAtoms = buildingBlocks[3];\n  const storeHooks = buildingBlocks[6];\n  const atomRead2 = buildingBlocks[7];\n  const ensureAtomState2 = buildingBlocks[11];\n  const flushCallbacks2 = buildingBlocks[12];\n  const recomputeInvalidatedAtoms2 = buildingBlocks[13];\n  const readAtomState2 = buildingBlocks[14];\n  const writeAtomState2 = buildingBlocks[16];\n  const mountDependencies2 = buildingBlocks[17];\n  const atomState = ensureAtomState2(store, atom);\n  if (isAtomStateInitialized(atomState)) {\n    if (mountedMap.has(atom) && invalidatedAtoms.get(atom) !== atomState.n) {\n      return atomState;\n    }\n    if (Array.from(atomState.d).every(\n      ([a, n]) => (\n        // Recursively, read the atom state of the dependency, and\n        // check if the atom epoch number is unchanged\n        readAtomState2(store, a).n === n\n      )\n    )) {\n      return atomState;\n    }\n  }\n  atomState.d.clear();\n  let isSync = true;\n  function mountDependenciesIfAsync() {\n    if (mountedMap.has(atom)) {\n      mountDependencies2(store, atom);\n      recomputeInvalidatedAtoms2(store);\n      flushCallbacks2(store);\n    }\n  }\n  function getter(a) {\n    var _a2;\n    if (a === atom) {\n      const aState2 = ensureAtomState2(store, a);\n      if (!isAtomStateInitialized(aState2)) {\n        if (hasInitialValue(a)) {\n          setAtomStateValueOrPromise(store, a, a.init);\n        } else {\n          throw new Error(\"no atom init\");\n        }\n      }\n      return returnAtomValue(aState2);\n    }\n    const aState = readAtomState2(store, a);\n    try {\n      return returnAtomValue(aState);\n    } finally {\n      atomState.d.set(a, aState.n);\n      if (isPendingPromise(atomState.v)) {\n        addPendingPromiseToDependency(atom, atomState.v, aState);\n      }\n      (_a2 = mountedMap.get(a)) == null ? void 0 : _a2.t.add(atom);\n      if (!isSync) {\n        mountDependenciesIfAsync();\n      }\n    }\n  }\n  let controller;\n  let setSelf;\n  const options = {\n    get signal() {\n      if (!controller) {\n        controller = new AbortController();\n      }\n      return controller.signal;\n    },\n    get setSelf() {\n      if (( false ? 0 : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n        console.warn(\"setSelf function cannot be used with read-only atom\");\n      }\n      if (!setSelf && isActuallyWritableAtom(atom)) {\n        setSelf = (...args) => {\n          if (( false ? 0 : void 0) !== \"production\" && isSync) {\n            console.warn(\"setSelf function cannot be called in sync\");\n          }\n          if (!isSync) {\n            try {\n              return writeAtomState2(store, atom, ...args);\n            } finally {\n              recomputeInvalidatedAtoms2(store);\n              flushCallbacks2(store);\n            }\n          }\n        };\n      }\n      return setSelf;\n    }\n  };\n  const prevEpochNumber = atomState.n;\n  try {\n    const valueOrPromise = atomRead2(store, atom, getter, options);\n    setAtomStateValueOrPromise(store, atom, valueOrPromise);\n    if (isPromiseLike(valueOrPromise)) {\n      registerAbortHandler(valueOrPromise, () => controller == null ? void 0 : controller.abort());\n      valueOrPromise.then(mountDependenciesIfAsync, mountDependenciesIfAsync);\n    }\n    (_a = storeHooks.r) == null ? void 0 : _a.call(storeHooks, atom);\n    return atomState;\n  } catch (error) {\n    delete atomState.v;\n    atomState.e = error;\n    ++atomState.n;\n    return atomState;\n  } finally {\n    isSync = false;\n    if (prevEpochNumber !== atomState.n && invalidatedAtoms.get(atom) === prevEpochNumber) {\n      invalidatedAtoms.set(atom, atomState.n);\n      changedAtoms.add(atom);\n      (_b = storeHooks.c) == null ? void 0 : _b.call(storeHooks, atom);\n    }\n  }\n};\nconst invalidateDependents = (store, atom) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const invalidatedAtoms = buildingBlocks[2];\n  const ensureAtomState2 = buildingBlocks[11];\n  const stack = [atom];\n  while (stack.length) {\n    const a = stack.pop();\n    const aState = ensureAtomState2(store, a);\n    for (const d of getMountedOrPendingDependents(a, aState, mountedMap)) {\n      const dState = ensureAtomState2(store, d);\n      invalidatedAtoms.set(d, dState.n);\n      stack.push(d);\n    }\n  }\n};\nconst writeAtomState = (store, atom, ...args) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const changedAtoms = buildingBlocks[3];\n  const storeHooks = buildingBlocks[6];\n  const atomWrite2 = buildingBlocks[8];\n  const ensureAtomState2 = buildingBlocks[11];\n  const flushCallbacks2 = buildingBlocks[12];\n  const recomputeInvalidatedAtoms2 = buildingBlocks[13];\n  const readAtomState2 = buildingBlocks[14];\n  const invalidateDependents2 = buildingBlocks[15];\n  const mountDependencies2 = buildingBlocks[17];\n  let isSync = true;\n  const getter = (a) => returnAtomValue(readAtomState2(store, a));\n  const setter = (a, ...args2) => {\n    var _a;\n    const aState = ensureAtomState2(store, a);\n    try {\n      if (a === atom) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const prevEpochNumber = aState.n;\n        const v = args2[0];\n        setAtomStateValueOrPromise(store, a, v);\n        mountDependencies2(store, a);\n        if (prevEpochNumber !== aState.n) {\n          changedAtoms.add(a);\n          (_a = storeHooks.c) == null ? void 0 : _a.call(storeHooks, a);\n          invalidateDependents2(store, a);\n        }\n        return void 0;\n      } else {\n        return writeAtomState(store, a, ...args2);\n      }\n    } finally {\n      if (!isSync) {\n        recomputeInvalidatedAtoms2(store);\n        flushCallbacks2(store);\n      }\n    }\n  };\n  try {\n    return atomWrite2(store, atom, getter, setter, ...args);\n  } finally {\n    isSync = false;\n  }\n};\nconst mountDependencies = (store, atom) => {\n  var _a;\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const changedAtoms = buildingBlocks[3];\n  const storeHooks = buildingBlocks[6];\n  const ensureAtomState2 = buildingBlocks[11];\n  const invalidateDependents2 = buildingBlocks[15];\n  const mountAtom2 = buildingBlocks[18];\n  const unmountAtom2 = buildingBlocks[19];\n  const atomState = ensureAtomState2(store, atom);\n  const mounted = mountedMap.get(atom);\n  if (mounted && !isPendingPromise(atomState.v)) {\n    for (const [a, n] of atomState.d) {\n      if (!mounted.d.has(a)) {\n        const aState = ensureAtomState2(store, a);\n        const aMounted = mountAtom2(store, a);\n        aMounted.t.add(atom);\n        mounted.d.add(a);\n        if (n !== aState.n) {\n          changedAtoms.add(a);\n          (_a = storeHooks.c) == null ? void 0 : _a.call(storeHooks, a);\n          invalidateDependents2(store, a);\n        }\n      }\n    }\n    for (const a of mounted.d || []) {\n      if (!atomState.d.has(a)) {\n        mounted.d.delete(a);\n        const aMounted = unmountAtom2(store, a);\n        aMounted == null ? void 0 : aMounted.t.delete(atom);\n      }\n    }\n  }\n};\nconst mountAtom = (store, atom) => {\n  var _a;\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const mountCallbacks = buildingBlocks[4];\n  const storeHooks = buildingBlocks[6];\n  const atomOnMount2 = buildingBlocks[10];\n  const ensureAtomState2 = buildingBlocks[11];\n  const flushCallbacks2 = buildingBlocks[12];\n  const recomputeInvalidatedAtoms2 = buildingBlocks[13];\n  const readAtomState2 = buildingBlocks[14];\n  const writeAtomState2 = buildingBlocks[16];\n  const atomState = ensureAtomState2(store, atom);\n  let mounted = mountedMap.get(atom);\n  if (!mounted) {\n    readAtomState2(store, atom);\n    for (const a of atomState.d.keys()) {\n      const aMounted = mountAtom(store, a);\n      aMounted.t.add(atom);\n    }\n    mounted = {\n      l: /* @__PURE__ */ new Set(),\n      d: new Set(atomState.d.keys()),\n      t: /* @__PURE__ */ new Set()\n    };\n    mountedMap.set(atom, mounted);\n    (_a = storeHooks.m) == null ? void 0 : _a.call(storeHooks, atom);\n    if (isActuallyWritableAtom(atom)) {\n      const processOnMount = () => {\n        let isSync = true;\n        const setAtom = (...args) => {\n          try {\n            return writeAtomState2(store, atom, ...args);\n          } finally {\n            if (!isSync) {\n              recomputeInvalidatedAtoms2(store);\n              flushCallbacks2(store);\n            }\n          }\n        };\n        try {\n          const onUnmount = atomOnMount2(store, atom, setAtom);\n          if (onUnmount) {\n            mounted.u = () => {\n              isSync = true;\n              try {\n                onUnmount();\n              } finally {\n                isSync = false;\n              }\n            };\n          }\n        } finally {\n          isSync = false;\n        }\n      };\n      mountCallbacks.add(processOnMount);\n    }\n  }\n  return mounted;\n};\nconst unmountAtom = (store, atom) => {\n  var _a;\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const mountedMap = buildingBlocks[1];\n  const unmountCallbacks = buildingBlocks[5];\n  const storeHooks = buildingBlocks[6];\n  const ensureAtomState2 = buildingBlocks[11];\n  const unmountAtom2 = buildingBlocks[19];\n  const atomState = ensureAtomState2(store, atom);\n  let mounted = mountedMap.get(atom);\n  if (mounted && !mounted.l.size && !Array.from(mounted.t).some((a) => {\n    var _a2;\n    return (_a2 = mountedMap.get(a)) == null ? void 0 : _a2.d.has(atom);\n  })) {\n    if (mounted.u) {\n      unmountCallbacks.add(mounted.u);\n    }\n    mounted = void 0;\n    mountedMap.delete(atom);\n    (_a = storeHooks.u) == null ? void 0 : _a.call(storeHooks, atom);\n    for (const a of atomState.d.keys()) {\n      const aMounted = unmountAtom2(store, a);\n      aMounted == null ? void 0 : aMounted.t.delete(atom);\n    }\n    return void 0;\n  }\n  return mounted;\n};\nconst setAtomStateValueOrPromise = (store, atom, valueOrPromise) => {\n  const ensureAtomState2 = getInternalBuildingBlocks(store)[11];\n  const atomState = ensureAtomState2(store, atom);\n  const hasPrevValue = \"v\" in atomState;\n  const prevValue = atomState.v;\n  if (isPromiseLike(valueOrPromise)) {\n    for (const a of atomState.d.keys()) {\n      addPendingPromiseToDependency(\n        atom,\n        valueOrPromise,\n        ensureAtomState2(store, a)\n      );\n    }\n  }\n  atomState.v = valueOrPromise;\n  delete atomState.e;\n  if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n    ++atomState.n;\n    if (isPromiseLike(prevValue)) {\n      abortPromise(prevValue);\n    }\n  }\n};\nconst storeGet = (store, atom) => {\n  const readAtomState2 = getInternalBuildingBlocks(store)[14];\n  return returnAtomValue(readAtomState2(store, atom));\n};\nconst storeSet = (store, atom, ...args) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const flushCallbacks2 = buildingBlocks[12];\n  const recomputeInvalidatedAtoms2 = buildingBlocks[13];\n  const writeAtomState2 = buildingBlocks[16];\n  try {\n    return writeAtomState2(store, atom, ...args);\n  } finally {\n    recomputeInvalidatedAtoms2(store);\n    flushCallbacks2(store);\n  }\n};\nconst storeSub = (store, atom, listener) => {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const flushCallbacks2 = buildingBlocks[12];\n  const mountAtom2 = buildingBlocks[18];\n  const unmountAtom2 = buildingBlocks[19];\n  const mounted = mountAtom2(store, atom);\n  const listeners = mounted.l;\n  listeners.add(listener);\n  flushCallbacks2(store);\n  return () => {\n    listeners.delete(listener);\n    unmountAtom2(store, atom);\n    flushCallbacks2(store);\n  };\n};\nconst buildingBlockMap = /* @__PURE__ */ new WeakMap();\nconst getInternalBuildingBlocks = (store) => {\n  const buildingBlocks = buildingBlockMap.get(store);\n  if (( false ? 0 : void 0) !== \"production\" && !buildingBlocks) {\n    throw new Error(\n      \"Store must be created by buildStore to read its building blocks\"\n    );\n  }\n  return buildingBlocks;\n};\nfunction getBuildingBlocks(store) {\n  const buildingBlocks = getInternalBuildingBlocks(store);\n  const enhanceBuildingBlocks = buildingBlocks[24];\n  if (enhanceBuildingBlocks) {\n    return enhanceBuildingBlocks(buildingBlocks);\n  }\n  return buildingBlocks;\n}\nfunction buildStore(...buildArgs) {\n  const store = {\n    get(atom) {\n      const storeGet2 = getInternalBuildingBlocks(store)[21];\n      return storeGet2(store, atom);\n    },\n    set(atom, ...args) {\n      const storeSet2 = getInternalBuildingBlocks(store)[22];\n      return storeSet2(store, atom, ...args);\n    },\n    sub(atom, listener) {\n      const storeSub2 = getInternalBuildingBlocks(store)[23];\n      return storeSub2(store, atom, listener);\n    }\n  };\n  const buildingBlocks = [\n    // store state\n    /* @__PURE__ */ new WeakMap(),\n    // atomStateMap\n    /* @__PURE__ */ new WeakMap(),\n    // mountedMap\n    /* @__PURE__ */ new WeakMap(),\n    // invalidatedAtoms\n    /* @__PURE__ */ new Set(),\n    // changedAtoms\n    /* @__PURE__ */ new Set(),\n    // mountCallbacks\n    /* @__PURE__ */ new Set(),\n    // unmountCallbacks\n    {},\n    // storeHooks\n    // atom interceptors\n    atomRead,\n    atomWrite,\n    atomOnInit,\n    atomOnMount,\n    // building-block functions\n    ensureAtomState,\n    flushCallbacks,\n    recomputeInvalidatedAtoms,\n    readAtomState,\n    invalidateDependents,\n    writeAtomState,\n    mountDependencies,\n    mountAtom,\n    unmountAtom,\n    setAtomStateValueOrPromise,\n    storeGet,\n    storeSet,\n    storeSub,\n    void 0\n  ].map((fn, i) => buildArgs[i] || fn);\n  buildingBlockMap.set(store, Object.freeze(buildingBlocks));\n  return store;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS9pbnRlcm5hbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLE1BQWUsR0FBRyxDQUFvQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxVQUFVLE1BQWUsR0FBRyxDQUFvQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVcsTUFBZSxHQUFHLENBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxNQUFlLEdBQUcsQ0FBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxNQUFlLEdBQUcsQ0FBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVzdUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qaWF3ZW56aHUvRGV2ZWxvcGVyL0phc3RhbGtfdmFwaS9jbGllbnQvbm9kZV9tb2R1bGVzLy5wbnBtL2pvdGFpQDIuMTUuMF9AdHlwZXMrcmVhY3RAMTkuMC43X3JlYWN0QDE5LjAuMC9ub2RlX21vZHVsZXMvam90YWkvZXNtL3ZhbmlsbGEvaW50ZXJuYWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBoYXNJbml0aWFsVmFsdWUoYXRvbSkge1xuICByZXR1cm4gXCJpbml0XCIgaW4gYXRvbTtcbn1cbmZ1bmN0aW9uIGlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkge1xuICByZXR1cm4gISFhdG9tLndyaXRlO1xufVxuZnVuY3Rpb24gaXNBdG9tU3RhdGVJbml0aWFsaXplZChhdG9tU3RhdGUpIHtcbiAgcmV0dXJuIFwidlwiIGluIGF0b21TdGF0ZSB8fCBcImVcIiBpbiBhdG9tU3RhdGU7XG59XG5mdW5jdGlvbiByZXR1cm5BdG9tVmFsdWUoYXRvbVN0YXRlKSB7XG4gIGlmIChcImVcIiBpbiBhdG9tU3RhdGUpIHtcbiAgICB0aHJvdyBhdG9tU3RhdGUuZTtcbiAgfVxuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIShcInZcIiBpbiBhdG9tU3RhdGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiW0J1Z10gYXRvbSBzdGF0ZSBpcyBub3QgaW5pdGlhbGl6ZWRcIik7XG4gIH1cbiAgcmV0dXJuIGF0b21TdGF0ZS52O1xufVxuY29uc3QgcHJvbWlzZVN0YXRlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBpc1BlbmRpbmdQcm9taXNlKHZhbHVlKSB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIGlzUHJvbWlzZUxpa2UodmFsdWUpICYmICEhKChfYSA9IHByb21pc2VTdGF0ZU1hcC5nZXQodmFsdWUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FbMF0pO1xufVxuZnVuY3Rpb24gYWJvcnRQcm9taXNlKHByb21pc2UpIHtcbiAgY29uc3QgcHJvbWlzZVN0YXRlID0gcHJvbWlzZVN0YXRlTWFwLmdldChwcm9taXNlKTtcbiAgaWYgKHByb21pc2VTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogcHJvbWlzZVN0YXRlWzBdKSB7XG4gICAgcHJvbWlzZVN0YXRlWzBdID0gZmFsc2U7XG4gICAgcHJvbWlzZVN0YXRlWzFdLmZvckVhY2goKGZuKSA9PiBmbigpKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVnaXN0ZXJBYm9ydEhhbmRsZXIocHJvbWlzZSwgYWJvcnRIYW5kbGVyKSB7XG4gIGxldCBwcm9taXNlU3RhdGUgPSBwcm9taXNlU3RhdGVNYXAuZ2V0KHByb21pc2UpO1xuICBpZiAoIXByb21pc2VTdGF0ZSkge1xuICAgIHByb21pc2VTdGF0ZSA9IFt0cnVlLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXTtcbiAgICBwcm9taXNlU3RhdGVNYXAuc2V0KHByb21pc2UsIHByb21pc2VTdGF0ZSk7XG4gICAgY29uc3Qgc2V0dGxlID0gKCkgPT4ge1xuICAgICAgcHJvbWlzZVN0YXRlWzBdID0gZmFsc2U7XG4gICAgfTtcbiAgICBwcm9taXNlLnRoZW4oc2V0dGxlLCBzZXR0bGUpO1xuICB9XG4gIHByb21pc2VTdGF0ZVsxXS5hZGQoYWJvcnRIYW5kbGVyKTtcbn1cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2UocCkge1xuICByZXR1cm4gdHlwZW9mIChwID09IG51bGwgPyB2b2lkIDAgOiBwLnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiBhZGRQZW5kaW5nUHJvbWlzZVRvRGVwZW5kZW5jeShhdG9tLCBwcm9taXNlLCBkZXBlbmRlbmN5QXRvbVN0YXRlKSB7XG4gIGlmICghZGVwZW5kZW5jeUF0b21TdGF0ZS5wLmhhcyhhdG9tKSkge1xuICAgIGRlcGVuZGVuY3lBdG9tU3RhdGUucC5hZGQoYXRvbSk7XG4gICAgY29uc3QgY2xlYW51cCA9ICgpID0+IGRlcGVuZGVuY3lBdG9tU3RhdGUucC5kZWxldGUoYXRvbSk7XG4gICAgcHJvbWlzZS50aGVuKGNsZWFudXAsIGNsZWFudXApO1xuICB9XG59XG5mdW5jdGlvbiBnZXRNb3VudGVkT3JQZW5kaW5nRGVwZW5kZW50cyhhdG9tLCBhdG9tU3RhdGUsIG1vdW50ZWRNYXApIHtcbiAgdmFyIF9hO1xuICBjb25zdCBkZXBlbmRlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZm9yIChjb25zdCBhIG9mICgoX2EgPSBtb3VudGVkTWFwLmdldChhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnQpIHx8IFtdKSB7XG4gICAgaWYgKG1vdW50ZWRNYXAuaGFzKGEpKSB7XG4gICAgICBkZXBlbmRlbnRzLmFkZChhKTtcbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBhdG9tV2l0aFBlbmRpbmdQcm9taXNlIG9mIGF0b21TdGF0ZS5wKSB7XG4gICAgZGVwZW5kZW50cy5hZGQoYXRvbVdpdGhQZW5kaW5nUHJvbWlzZSk7XG4gIH1cbiAgcmV0dXJuIGRlcGVuZGVudHM7XG59XG5jb25zdCBjcmVhdGVTdG9yZUhvb2sgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IG5vdGlmeSA9ICgpID0+IGNhbGxiYWNrcy5mb3JFYWNoKChmbikgPT4gZm4oKSk7XG4gIG5vdGlmeS5hZGQgPSAoZm4pID0+IHtcbiAgICBjYWxsYmFja3MuYWRkKGZuKTtcbiAgICByZXR1cm4gKCkgPT4gY2FsbGJhY2tzLmRlbGV0ZShmbik7XG4gIH07XG4gIHJldHVybiBub3RpZnk7XG59O1xuY29uc3QgY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMgPSAoKSA9PiB7XG4gIGNvbnN0IGFsbCA9IHt9O1xuICBjb25zdCBjYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgbm90aWZ5ID0gKGF0b20pID0+IHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIChfYSA9IGNhbGxiYWNrcy5nZXQoYWxsKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvckVhY2goKGZuKSA9PiBmbihhdG9tKSk7XG4gICAgKF9iID0gY2FsbGJhY2tzLmdldChhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmZvckVhY2goKGZuKSA9PiBmbigpKTtcbiAgfTtcbiAgbm90aWZ5LmFkZCA9IChhdG9tLCBmbikgPT4ge1xuICAgIGNvbnN0IGtleSA9IGF0b20gfHwgYWxsO1xuICAgIGNvbnN0IGZucyA9IChjYWxsYmFja3MuaGFzKGtleSkgPyBjYWxsYmFja3MgOiBjYWxsYmFja3Muc2V0KGtleSwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkpLmdldChrZXkpO1xuICAgIGZucy5hZGQoZm4pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmbnMgPT0gbnVsbCA/IHZvaWQgMCA6IGZucy5kZWxldGUoZm4pO1xuICAgICAgaWYgKCFmbnMuc2l6ZSkge1xuICAgICAgICBjYWxsYmFja3MuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIG5vdGlmeTtcbn07XG5mdW5jdGlvbiBpbml0aWFsaXplU3RvcmVIb29rcyhzdG9yZUhvb2tzKSB7XG4gIHN0b3JlSG9va3MuciB8fCAoc3RvcmVIb29rcy5yID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MuYyB8fCAoc3RvcmVIb29rcy5jID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MubSB8fCAoc3RvcmVIb29rcy5tID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MudSB8fCAoc3RvcmVIb29rcy51ID0gY3JlYXRlU3RvcmVIb29rRm9yQXRvbXMoKSk7XG4gIHN0b3JlSG9va3MuZiB8fCAoc3RvcmVIb29rcy5mID0gY3JlYXRlU3RvcmVIb29rKCkpO1xuICByZXR1cm4gc3RvcmVIb29rcztcbn1cbmNvbnN0IGF0b21SZWFkID0gKF9zdG9yZSwgYXRvbSwgLi4ucGFyYW1zKSA9PiBhdG9tLnJlYWQoLi4ucGFyYW1zKTtcbmNvbnN0IGF0b21Xcml0ZSA9IChfc3RvcmUsIGF0b20sIC4uLnBhcmFtcykgPT4gYXRvbS53cml0ZSguLi5wYXJhbXMpO1xuY29uc3QgYXRvbU9uSW5pdCA9IChzdG9yZSwgYXRvbSkgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiAoX2EgPSBhdG9tLnVuc3RhYmxlX29uSW5pdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoYXRvbSwgc3RvcmUpO1xufTtcbmNvbnN0IGF0b21Pbk1vdW50ID0gKF9zdG9yZSwgYXRvbSwgc2V0QXRvbSkgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiAoX2EgPSBhdG9tLm9uTW91bnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKGF0b20sIHNldEF0b20pO1xufTtcbmNvbnN0IGVuc3VyZUF0b21TdGF0ZSA9IChzdG9yZSwgYXRvbSkgPT4ge1xuICBjb25zdCBidWlsZGluZ0Jsb2NrcyA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpO1xuICBjb25zdCBhdG9tU3RhdGVNYXAgPSBidWlsZGluZ0Jsb2Nrc1swXTtcbiAgY29uc3QgYXRvbU9uSW5pdDIgPSBidWlsZGluZ0Jsb2Nrc1s5XTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmICFhdG9tKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXRvbSBpcyB1bmRlZmluZWQgb3IgbnVsbFwiKTtcbiAgfVxuICBsZXQgYXRvbVN0YXRlID0gYXRvbVN0YXRlTWFwLmdldChhdG9tKTtcbiAgaWYgKCFhdG9tU3RhdGUpIHtcbiAgICBhdG9tU3RhdGUgPSB7IGQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksIHA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksIG46IDAgfTtcbiAgICBhdG9tU3RhdGVNYXAuc2V0KGF0b20sIGF0b21TdGF0ZSk7XG4gICAgYXRvbU9uSW5pdDIgPT0gbnVsbCA/IHZvaWQgMCA6IGF0b21PbkluaXQyKHN0b3JlLCBhdG9tKTtcbiAgfVxuICByZXR1cm4gYXRvbVN0YXRlO1xufTtcbmNvbnN0IGZsdXNoQ2FsbGJhY2tzID0gKHN0b3JlKSA9PiB7XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSk7XG4gIGNvbnN0IG1vdW50ZWRNYXAgPSBidWlsZGluZ0Jsb2Nrc1sxXTtcbiAgY29uc3QgY2hhbmdlZEF0b21zID0gYnVpbGRpbmdCbG9ja3NbM107XG4gIGNvbnN0IG1vdW50Q2FsbGJhY2tzID0gYnVpbGRpbmdCbG9ja3NbNF07XG4gIGNvbnN0IHVubW91bnRDYWxsYmFja3MgPSBidWlsZGluZ0Jsb2Nrc1s1XTtcbiAgY29uc3Qgc3RvcmVIb29rcyA9IGJ1aWxkaW5nQmxvY2tzWzZdO1xuICBjb25zdCByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zMiA9IGJ1aWxkaW5nQmxvY2tzWzEzXTtcbiAgY29uc3QgZXJyb3JzID0gW107XG4gIGNvbnN0IGNhbGwgPSAoZm4pID0+IHtcbiAgICB0cnkge1xuICAgICAgZm4oKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlcnJvcnMucHVzaChlKTtcbiAgICB9XG4gIH07XG4gIGRvIHtcbiAgICBpZiAoc3RvcmVIb29rcy5mKSB7XG4gICAgICBjYWxsKHN0b3JlSG9va3MuZik7XG4gICAgfVxuICAgIGNvbnN0IGNhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgYWRkID0gY2FsbGJhY2tzLmFkZC5iaW5kKGNhbGxiYWNrcyk7XG4gICAgY2hhbmdlZEF0b21zLmZvckVhY2goKGF0b20pID0+IHtcbiAgICAgIHZhciBfYTtcbiAgICAgIHJldHVybiAoX2EgPSBtb3VudGVkTWFwLmdldChhdG9tKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmwuZm9yRWFjaChhZGQpO1xuICAgIH0pO1xuICAgIGNoYW5nZWRBdG9tcy5jbGVhcigpO1xuICAgIHVubW91bnRDYWxsYmFja3MuZm9yRWFjaChhZGQpO1xuICAgIHVubW91bnRDYWxsYmFja3MuY2xlYXIoKTtcbiAgICBtb3VudENhbGxiYWNrcy5mb3JFYWNoKGFkZCk7XG4gICAgbW91bnRDYWxsYmFja3MuY2xlYXIoKTtcbiAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsKTtcbiAgICBpZiAoY2hhbmdlZEF0b21zLnNpemUpIHtcbiAgICAgIHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMyKHN0b3JlKTtcbiAgICB9XG4gIH0gd2hpbGUgKGNoYW5nZWRBdG9tcy5zaXplIHx8IHVubW91bnRDYWxsYmFja3Muc2l6ZSB8fCBtb3VudENhbGxiYWNrcy5zaXplKTtcbiAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgQWdncmVnYXRlRXJyb3IoZXJyb3JzKTtcbiAgfVxufTtcbmNvbnN0IHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMgPSAoc3RvcmUpID0+IHtcbiAgY29uc3QgYnVpbGRpbmdCbG9ja3MgPSBnZXRJbnRlcm5hbEJ1aWxkaW5nQmxvY2tzKHN0b3JlKTtcbiAgY29uc3QgbW91bnRlZE1hcCA9IGJ1aWxkaW5nQmxvY2tzWzFdO1xuICBjb25zdCBpbnZhbGlkYXRlZEF0b21zID0gYnVpbGRpbmdCbG9ja3NbMl07XG4gIGNvbnN0IGNoYW5nZWRBdG9tcyA9IGJ1aWxkaW5nQmxvY2tzWzNdO1xuICBjb25zdCBlbnN1cmVBdG9tU3RhdGUyID0gYnVpbGRpbmdCbG9ja3NbMTFdO1xuICBjb25zdCByZWFkQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzE0XTtcbiAgY29uc3QgbW91bnREZXBlbmRlbmNpZXMyID0gYnVpbGRpbmdCbG9ja3NbMTddO1xuICBjb25zdCB0b3BTb3J0ZWRSZXZlcnNlZCA9IFtdO1xuICBjb25zdCB2aXNpdGluZyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuICBjb25zdCB2aXNpdGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gIGNvbnN0IHN0YWNrID0gQXJyYXkuZnJvbShjaGFuZ2VkQXRvbXMpO1xuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgY29uc3QgYSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGFTdGF0ZSA9IGVuc3VyZUF0b21TdGF0ZTIoc3RvcmUsIGEpO1xuICAgIGlmICh2aXNpdGVkLmhhcyhhKSkge1xuICAgICAgc3RhY2sucG9wKCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHZpc2l0aW5nLmhhcyhhKSkge1xuICAgICAgaWYgKGludmFsaWRhdGVkQXRvbXMuZ2V0KGEpID09PSBhU3RhdGUubikge1xuICAgICAgICB0b3BTb3J0ZWRSZXZlcnNlZC5wdXNoKFthLCBhU3RhdGVdKTtcbiAgICAgIH0gZWxzZSBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgaW52YWxpZGF0ZWRBdG9tcy5oYXMoYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW0J1Z10gaW52YWxpZGF0ZWQgYXRvbSBleGlzdHNcIik7XG4gICAgICB9XG4gICAgICB2aXNpdGVkLmFkZChhKTtcbiAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZpc2l0aW5nLmFkZChhKTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZ2V0TW91bnRlZE9yUGVuZGluZ0RlcGVuZGVudHMoYSwgYVN0YXRlLCBtb3VudGVkTWFwKSkge1xuICAgICAgaWYgKCF2aXNpdGluZy5oYXMoZCkpIHtcbiAgICAgICAgc3RhY2sucHVzaChkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgaSA9IHRvcFNvcnRlZFJldmVyc2VkLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgY29uc3QgW2EsIGFTdGF0ZV0gPSB0b3BTb3J0ZWRSZXZlcnNlZFtpXTtcbiAgICBsZXQgaGFzQ2hhbmdlZERlcHMgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGRlcCBvZiBhU3RhdGUuZC5rZXlzKCkpIHtcbiAgICAgIGlmIChkZXAgIT09IGEgJiYgY2hhbmdlZEF0b21zLmhhcyhkZXApKSB7XG4gICAgICAgIGhhc0NoYW5nZWREZXBzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNDaGFuZ2VkRGVwcykge1xuICAgICAgcmVhZEF0b21TdGF0ZTIoc3RvcmUsIGEpO1xuICAgICAgbW91bnREZXBlbmRlbmNpZXMyKHN0b3JlLCBhKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZWRBdG9tcy5kZWxldGUoYSk7XG4gIH1cbn07XG5jb25zdCByZWFkQXRvbVN0YXRlID0gKHN0b3JlLCBhdG9tKSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSk7XG4gIGNvbnN0IG1vdW50ZWRNYXAgPSBidWlsZGluZ0Jsb2Nrc1sxXTtcbiAgY29uc3QgaW52YWxpZGF0ZWRBdG9tcyA9IGJ1aWxkaW5nQmxvY2tzWzJdO1xuICBjb25zdCBjaGFuZ2VkQXRvbXMgPSBidWlsZGluZ0Jsb2Nrc1szXTtcbiAgY29uc3Qgc3RvcmVIb29rcyA9IGJ1aWxkaW5nQmxvY2tzWzZdO1xuICBjb25zdCBhdG9tUmVhZDIgPSBidWlsZGluZ0Jsb2Nrc1s3XTtcbiAgY29uc3QgZW5zdXJlQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzExXTtcbiAgY29uc3QgZmx1c2hDYWxsYmFja3MyID0gYnVpbGRpbmdCbG9ja3NbMTJdO1xuICBjb25zdCByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zMiA9IGJ1aWxkaW5nQmxvY2tzWzEzXTtcbiAgY29uc3QgcmVhZEF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxNF07XG4gIGNvbnN0IHdyaXRlQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzE2XTtcbiAgY29uc3QgbW91bnREZXBlbmRlbmNpZXMyID0gYnVpbGRpbmdCbG9ja3NbMTddO1xuICBjb25zdCBhdG9tU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUyKHN0b3JlLCBhdG9tKTtcbiAgaWYgKGlzQXRvbVN0YXRlSW5pdGlhbGl6ZWQoYXRvbVN0YXRlKSkge1xuICAgIGlmIChtb3VudGVkTWFwLmhhcyhhdG9tKSAmJiBpbnZhbGlkYXRlZEF0b21zLmdldChhdG9tKSAhPT0gYXRvbVN0YXRlLm4pIHtcbiAgICAgIHJldHVybiBhdG9tU3RhdGU7XG4gICAgfVxuICAgIGlmIChBcnJheS5mcm9tKGF0b21TdGF0ZS5kKS5ldmVyeShcbiAgICAgIChbYSwgbl0pID0+IChcbiAgICAgICAgLy8gUmVjdXJzaXZlbHksIHJlYWQgdGhlIGF0b20gc3RhdGUgb2YgdGhlIGRlcGVuZGVuY3ksIGFuZFxuICAgICAgICAvLyBjaGVjayBpZiB0aGUgYXRvbSBlcG9jaCBudW1iZXIgaXMgdW5jaGFuZ2VkXG4gICAgICAgIHJlYWRBdG9tU3RhdGUyKHN0b3JlLCBhKS5uID09PSBuXG4gICAgICApXG4gICAgKSkge1xuICAgICAgcmV0dXJuIGF0b21TdGF0ZTtcbiAgICB9XG4gIH1cbiAgYXRvbVN0YXRlLmQuY2xlYXIoKTtcbiAgbGV0IGlzU3luYyA9IHRydWU7XG4gIGZ1bmN0aW9uIG1vdW50RGVwZW5kZW5jaWVzSWZBc3luYygpIHtcbiAgICBpZiAobW91bnRlZE1hcC5oYXMoYXRvbSkpIHtcbiAgICAgIG1vdW50RGVwZW5kZW5jaWVzMihzdG9yZSwgYXRvbSk7XG4gICAgICByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zMihzdG9yZSk7XG4gICAgICBmbHVzaENhbGxiYWNrczIoc3RvcmUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZXR0ZXIoYSkge1xuICAgIHZhciBfYTI7XG4gICAgaWYgKGEgPT09IGF0b20pIHtcbiAgICAgIGNvbnN0IGFTdGF0ZTIgPSBlbnN1cmVBdG9tU3RhdGUyKHN0b3JlLCBhKTtcbiAgICAgIGlmICghaXNBdG9tU3RhdGVJbml0aWFsaXplZChhU3RhdGUyKSkge1xuICAgICAgICBpZiAoaGFzSW5pdGlhbFZhbHVlKGEpKSB7XG4gICAgICAgICAgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2Uoc3RvcmUsIGEsIGEuaW5pdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm8gYXRvbSBpbml0XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuQXRvbVZhbHVlKGFTdGF0ZTIpO1xuICAgIH1cbiAgICBjb25zdCBhU3RhdGUgPSByZWFkQXRvbVN0YXRlMihzdG9yZSwgYSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiByZXR1cm5BdG9tVmFsdWUoYVN0YXRlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXRvbVN0YXRlLmQuc2V0KGEsIGFTdGF0ZS5uKTtcbiAgICAgIGlmIChpc1BlbmRpbmdQcm9taXNlKGF0b21TdGF0ZS52KSkge1xuICAgICAgICBhZGRQZW5kaW5nUHJvbWlzZVRvRGVwZW5kZW5jeShhdG9tLCBhdG9tU3RhdGUudiwgYVN0YXRlKTtcbiAgICAgIH1cbiAgICAgIChfYTIgPSBtb3VudGVkTWFwLmdldChhKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi50LmFkZChhdG9tKTtcbiAgICAgIGlmICghaXNTeW5jKSB7XG4gICAgICAgIG1vdW50RGVwZW5kZW5jaWVzSWZBc3luYygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgY29udHJvbGxlcjtcbiAgbGV0IHNldFNlbGY7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgZ2V0IHNpZ25hbCgpIHtcbiAgICAgIGlmICghY29udHJvbGxlcikge1xuICAgICAgICBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuc2lnbmFsO1xuICAgIH0sXG4gICAgZ2V0IHNldFNlbGYoKSB7XG4gICAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIWlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwic2V0U2VsZiBmdW5jdGlvbiBjYW5ub3QgYmUgdXNlZCB3aXRoIHJlYWQtb25seSBhdG9tXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFzZXRTZWxmICYmIGlzQWN0dWFsbHlXcml0YWJsZUF0b20oYXRvbSkpIHtcbiAgICAgICAgc2V0U2VsZiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmIGlzU3luYykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwic2V0U2VsZiBmdW5jdGlvbiBjYW5ub3QgYmUgY2FsbGVkIGluIHN5bmNcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghaXNTeW5jKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gd3JpdGVBdG9tU3RhdGUyKHN0b3JlLCBhdG9tLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMyKHN0b3JlKTtcbiAgICAgICAgICAgICAgZmx1c2hDYWxsYmFja3MyKHN0b3JlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gc2V0U2VsZjtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHByZXZFcG9jaE51bWJlciA9IGF0b21TdGF0ZS5uO1xuICB0cnkge1xuICAgIGNvbnN0IHZhbHVlT3JQcm9taXNlID0gYXRvbVJlYWQyKHN0b3JlLCBhdG9tLCBnZXR0ZXIsIG9wdGlvbnMpO1xuICAgIHNldEF0b21TdGF0ZVZhbHVlT3JQcm9taXNlKHN0b3JlLCBhdG9tLCB2YWx1ZU9yUHJvbWlzZSk7XG4gICAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWVPclByb21pc2UpKSB7XG4gICAgICByZWdpc3RlckFib3J0SGFuZGxlcih2YWx1ZU9yUHJvbWlzZSwgKCkgPT4gY29udHJvbGxlciA9PSBudWxsID8gdm9pZCAwIDogY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICAgIHZhbHVlT3JQcm9taXNlLnRoZW4obW91bnREZXBlbmRlbmNpZXNJZkFzeW5jLCBtb3VudERlcGVuZGVuY2llc0lmQXN5bmMpO1xuICAgIH1cbiAgICAoX2EgPSBzdG9yZUhvb2tzLnIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHN0b3JlSG9va3MsIGF0b20pO1xuICAgIHJldHVybiBhdG9tU3RhdGU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVsZXRlIGF0b21TdGF0ZS52O1xuICAgIGF0b21TdGF0ZS5lID0gZXJyb3I7XG4gICAgKythdG9tU3RhdGUubjtcbiAgICByZXR1cm4gYXRvbVN0YXRlO1xuICB9IGZpbmFsbHkge1xuICAgIGlzU3luYyA9IGZhbHNlO1xuICAgIGlmIChwcmV2RXBvY2hOdW1iZXIgIT09IGF0b21TdGF0ZS5uICYmIGludmFsaWRhdGVkQXRvbXMuZ2V0KGF0b20pID09PSBwcmV2RXBvY2hOdW1iZXIpIHtcbiAgICAgIGludmFsaWRhdGVkQXRvbXMuc2V0KGF0b20sIGF0b21TdGF0ZS5uKTtcbiAgICAgIGNoYW5nZWRBdG9tcy5hZGQoYXRvbSk7XG4gICAgICAoX2IgPSBzdG9yZUhvb2tzLmMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKHN0b3JlSG9va3MsIGF0b20pO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IGludmFsaWRhdGVEZXBlbmRlbnRzID0gKHN0b3JlLCBhdG9tKSA9PiB7XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSk7XG4gIGNvbnN0IG1vdW50ZWRNYXAgPSBidWlsZGluZ0Jsb2Nrc1sxXTtcbiAgY29uc3QgaW52YWxpZGF0ZWRBdG9tcyA9IGJ1aWxkaW5nQmxvY2tzWzJdO1xuICBjb25zdCBlbnN1cmVBdG9tU3RhdGUyID0gYnVpbGRpbmdCbG9ja3NbMTFdO1xuICBjb25zdCBzdGFjayA9IFthdG9tXTtcbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGNvbnN0IGEgPSBzdGFjay5wb3AoKTtcbiAgICBjb25zdCBhU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUyKHN0b3JlLCBhKTtcbiAgICBmb3IgKGNvbnN0IGQgb2YgZ2V0TW91bnRlZE9yUGVuZGluZ0RlcGVuZGVudHMoYSwgYVN0YXRlLCBtb3VudGVkTWFwKSkge1xuICAgICAgY29uc3QgZFN0YXRlID0gZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgZCk7XG4gICAgICBpbnZhbGlkYXRlZEF0b21zLnNldChkLCBkU3RhdGUubik7XG4gICAgICBzdGFjay5wdXNoKGQpO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IHdyaXRlQXRvbVN0YXRlID0gKHN0b3JlLCBhdG9tLCAuLi5hcmdzKSA9PiB7XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSk7XG4gIGNvbnN0IGNoYW5nZWRBdG9tcyA9IGJ1aWxkaW5nQmxvY2tzWzNdO1xuICBjb25zdCBzdG9yZUhvb2tzID0gYnVpbGRpbmdCbG9ja3NbNl07XG4gIGNvbnN0IGF0b21Xcml0ZTIgPSBidWlsZGluZ0Jsb2Nrc1s4XTtcbiAgY29uc3QgZW5zdXJlQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzExXTtcbiAgY29uc3QgZmx1c2hDYWxsYmFja3MyID0gYnVpbGRpbmdCbG9ja3NbMTJdO1xuICBjb25zdCByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zMiA9IGJ1aWxkaW5nQmxvY2tzWzEzXTtcbiAgY29uc3QgcmVhZEF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxNF07XG4gIGNvbnN0IGludmFsaWRhdGVEZXBlbmRlbnRzMiA9IGJ1aWxkaW5nQmxvY2tzWzE1XTtcbiAgY29uc3QgbW91bnREZXBlbmRlbmNpZXMyID0gYnVpbGRpbmdCbG9ja3NbMTddO1xuICBsZXQgaXNTeW5jID0gdHJ1ZTtcbiAgY29uc3QgZ2V0dGVyID0gKGEpID0+IHJldHVybkF0b21WYWx1ZShyZWFkQXRvbVN0YXRlMihzdG9yZSwgYSkpO1xuICBjb25zdCBzZXR0ZXIgPSAoYSwgLi4uYXJnczIpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgYVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgYSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhID09PSBhdG9tKSB7XG4gICAgICAgIGlmICghaGFzSW5pdGlhbFZhbHVlKGEpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXRvbSBub3Qgd3JpdGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldkVwb2NoTnVtYmVyID0gYVN0YXRlLm47XG4gICAgICAgIGNvbnN0IHYgPSBhcmdzMlswXTtcbiAgICAgICAgc2V0QXRvbVN0YXRlVmFsdWVPclByb21pc2Uoc3RvcmUsIGEsIHYpO1xuICAgICAgICBtb3VudERlcGVuZGVuY2llczIoc3RvcmUsIGEpO1xuICAgICAgICBpZiAocHJldkVwb2NoTnVtYmVyICE9PSBhU3RhdGUubikge1xuICAgICAgICAgIGNoYW5nZWRBdG9tcy5hZGQoYSk7XG4gICAgICAgICAgKF9hID0gc3RvcmVIb29rcy5jKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChzdG9yZUhvb2tzLCBhKTtcbiAgICAgICAgICBpbnZhbGlkYXRlRGVwZW5kZW50czIoc3RvcmUsIGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gd3JpdGVBdG9tU3RhdGUoc3RvcmUsIGEsIC4uLmFyZ3MyKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKCFpc1N5bmMpIHtcbiAgICAgICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tczIoc3RvcmUpO1xuICAgICAgICBmbHVzaENhbGxiYWNrczIoc3RvcmUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXRvbVdyaXRlMihzdG9yZSwgYXRvbSwgZ2V0dGVyLCBzZXR0ZXIsIC4uLmFyZ3MpO1xuICB9IGZpbmFsbHkge1xuICAgIGlzU3luYyA9IGZhbHNlO1xuICB9XG59O1xuY29uc3QgbW91bnREZXBlbmRlbmNpZXMgPSAoc3RvcmUsIGF0b20pID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBidWlsZGluZ0Jsb2NrcyA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpO1xuICBjb25zdCBtb3VudGVkTWFwID0gYnVpbGRpbmdCbG9ja3NbMV07XG4gIGNvbnN0IGNoYW5nZWRBdG9tcyA9IGJ1aWxkaW5nQmxvY2tzWzNdO1xuICBjb25zdCBzdG9yZUhvb2tzID0gYnVpbGRpbmdCbG9ja3NbNl07XG4gIGNvbnN0IGVuc3VyZUF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxMV07XG4gIGNvbnN0IGludmFsaWRhdGVEZXBlbmRlbnRzMiA9IGJ1aWxkaW5nQmxvY2tzWzE1XTtcbiAgY29uc3QgbW91bnRBdG9tMiA9IGJ1aWxkaW5nQmxvY2tzWzE4XTtcbiAgY29uc3QgdW5tb3VudEF0b20yID0gYnVpbGRpbmdCbG9ja3NbMTldO1xuICBjb25zdCBhdG9tU3RhdGUgPSBlbnN1cmVBdG9tU3RhdGUyKHN0b3JlLCBhdG9tKTtcbiAgY29uc3QgbW91bnRlZCA9IG1vdW50ZWRNYXAuZ2V0KGF0b20pO1xuICBpZiAobW91bnRlZCAmJiAhaXNQZW5kaW5nUHJvbWlzZShhdG9tU3RhdGUudikpIHtcbiAgICBmb3IgKGNvbnN0IFthLCBuXSBvZiBhdG9tU3RhdGUuZCkge1xuICAgICAgaWYgKCFtb3VudGVkLmQuaGFzKGEpKSB7XG4gICAgICAgIGNvbnN0IGFTdGF0ZSA9IGVuc3VyZUF0b21TdGF0ZTIoc3RvcmUsIGEpO1xuICAgICAgICBjb25zdCBhTW91bnRlZCA9IG1vdW50QXRvbTIoc3RvcmUsIGEpO1xuICAgICAgICBhTW91bnRlZC50LmFkZChhdG9tKTtcbiAgICAgICAgbW91bnRlZC5kLmFkZChhKTtcbiAgICAgICAgaWYgKG4gIT09IGFTdGF0ZS5uKSB7XG4gICAgICAgICAgY2hhbmdlZEF0b21zLmFkZChhKTtcbiAgICAgICAgICAoX2EgPSBzdG9yZUhvb2tzLmMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHN0b3JlSG9va3MsIGEpO1xuICAgICAgICAgIGludmFsaWRhdGVEZXBlbmRlbnRzMihzdG9yZSwgYSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBhIG9mIG1vdW50ZWQuZCB8fCBbXSkge1xuICAgICAgaWYgKCFhdG9tU3RhdGUuZC5oYXMoYSkpIHtcbiAgICAgICAgbW91bnRlZC5kLmRlbGV0ZShhKTtcbiAgICAgICAgY29uc3QgYU1vdW50ZWQgPSB1bm1vdW50QXRvbTIoc3RvcmUsIGEpO1xuICAgICAgICBhTW91bnRlZCA9PSBudWxsID8gdm9pZCAwIDogYU1vdW50ZWQudC5kZWxldGUoYXRvbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuY29uc3QgbW91bnRBdG9tID0gKHN0b3JlLCBhdG9tKSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgYnVpbGRpbmdCbG9ja3MgPSBnZXRJbnRlcm5hbEJ1aWxkaW5nQmxvY2tzKHN0b3JlKTtcbiAgY29uc3QgbW91bnRlZE1hcCA9IGJ1aWxkaW5nQmxvY2tzWzFdO1xuICBjb25zdCBtb3VudENhbGxiYWNrcyA9IGJ1aWxkaW5nQmxvY2tzWzRdO1xuICBjb25zdCBzdG9yZUhvb2tzID0gYnVpbGRpbmdCbG9ja3NbNl07XG4gIGNvbnN0IGF0b21Pbk1vdW50MiA9IGJ1aWxkaW5nQmxvY2tzWzEwXTtcbiAgY29uc3QgZW5zdXJlQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzExXTtcbiAgY29uc3QgZmx1c2hDYWxsYmFja3MyID0gYnVpbGRpbmdCbG9ja3NbMTJdO1xuICBjb25zdCByZWNvbXB1dGVJbnZhbGlkYXRlZEF0b21zMiA9IGJ1aWxkaW5nQmxvY2tzWzEzXTtcbiAgY29uc3QgcmVhZEF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxNF07XG4gIGNvbnN0IHdyaXRlQXRvbVN0YXRlMiA9IGJ1aWxkaW5nQmxvY2tzWzE2XTtcbiAgY29uc3QgYXRvbVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgYXRvbSk7XG4gIGxldCBtb3VudGVkID0gbW91bnRlZE1hcC5nZXQoYXRvbSk7XG4gIGlmICghbW91bnRlZCkge1xuICAgIHJlYWRBdG9tU3RhdGUyKHN0b3JlLCBhdG9tKTtcbiAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbVN0YXRlLmQua2V5cygpKSB7XG4gICAgICBjb25zdCBhTW91bnRlZCA9IG1vdW50QXRvbShzdG9yZSwgYSk7XG4gICAgICBhTW91bnRlZC50LmFkZChhdG9tKTtcbiAgICB9XG4gICAgbW91bnRlZCA9IHtcbiAgICAgIGw6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgICBkOiBuZXcgU2V0KGF0b21TdGF0ZS5kLmtleXMoKSksXG4gICAgICB0OiAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpXG4gICAgfTtcbiAgICBtb3VudGVkTWFwLnNldChhdG9tLCBtb3VudGVkKTtcbiAgICAoX2EgPSBzdG9yZUhvb2tzLm0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHN0b3JlSG9va3MsIGF0b20pO1xuICAgIGlmIChpc0FjdHVhbGx5V3JpdGFibGVBdG9tKGF0b20pKSB7XG4gICAgICBjb25zdCBwcm9jZXNzT25Nb3VudCA9ICgpID0+IHtcbiAgICAgICAgbGV0IGlzU3luYyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHNldEF0b20gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd3JpdGVBdG9tU3RhdGUyKHN0b3JlLCBhdG9tLCAuLi5hcmdzKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKCFpc1N5bmMpIHtcbiAgICAgICAgICAgICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tczIoc3RvcmUpO1xuICAgICAgICAgICAgICBmbHVzaENhbGxiYWNrczIoc3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBvblVubW91bnQgPSBhdG9tT25Nb3VudDIoc3RvcmUsIGF0b20sIHNldEF0b20pO1xuICAgICAgICAgIGlmIChvblVubW91bnQpIHtcbiAgICAgICAgICAgIG1vdW50ZWQudSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgaXNTeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBvblVubW91bnQoKTtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpc1N5bmMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaXNTeW5jID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBtb3VudENhbGxiYWNrcy5hZGQocHJvY2Vzc09uTW91bnQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbW91bnRlZDtcbn07XG5jb25zdCB1bm1vdW50QXRvbSA9IChzdG9yZSwgYXRvbSkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSk7XG4gIGNvbnN0IG1vdW50ZWRNYXAgPSBidWlsZGluZ0Jsb2Nrc1sxXTtcbiAgY29uc3QgdW5tb3VudENhbGxiYWNrcyA9IGJ1aWxkaW5nQmxvY2tzWzVdO1xuICBjb25zdCBzdG9yZUhvb2tzID0gYnVpbGRpbmdCbG9ja3NbNl07XG4gIGNvbnN0IGVuc3VyZUF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxMV07XG4gIGNvbnN0IHVubW91bnRBdG9tMiA9IGJ1aWxkaW5nQmxvY2tzWzE5XTtcbiAgY29uc3QgYXRvbVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgYXRvbSk7XG4gIGxldCBtb3VudGVkID0gbW91bnRlZE1hcC5nZXQoYXRvbSk7XG4gIGlmIChtb3VudGVkICYmICFtb3VudGVkLmwuc2l6ZSAmJiAhQXJyYXkuZnJvbShtb3VudGVkLnQpLnNvbWUoKGEpID0+IHtcbiAgICB2YXIgX2EyO1xuICAgIHJldHVybiAoX2EyID0gbW91bnRlZE1hcC5nZXQoYSkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIuZC5oYXMoYXRvbSk7XG4gIH0pKSB7XG4gICAgaWYgKG1vdW50ZWQudSkge1xuICAgICAgdW5tb3VudENhbGxiYWNrcy5hZGQobW91bnRlZC51KTtcbiAgICB9XG4gICAgbW91bnRlZCA9IHZvaWQgMDtcbiAgICBtb3VudGVkTWFwLmRlbGV0ZShhdG9tKTtcbiAgICAoX2EgPSBzdG9yZUhvb2tzLnUpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsKHN0b3JlSG9va3MsIGF0b20pO1xuICAgIGZvciAoY29uc3QgYSBvZiBhdG9tU3RhdGUuZC5rZXlzKCkpIHtcbiAgICAgIGNvbnN0IGFNb3VudGVkID0gdW5tb3VudEF0b20yKHN0b3JlLCBhKTtcbiAgICAgIGFNb3VudGVkID09IG51bGwgPyB2b2lkIDAgOiBhTW91bnRlZC50LmRlbGV0ZShhdG9tKTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICByZXR1cm4gbW91bnRlZDtcbn07XG5jb25zdCBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZSA9IChzdG9yZSwgYXRvbSwgdmFsdWVPclByb21pc2UpID0+IHtcbiAgY29uc3QgZW5zdXJlQXRvbVN0YXRlMiA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpWzExXTtcbiAgY29uc3QgYXRvbVN0YXRlID0gZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgYXRvbSk7XG4gIGNvbnN0IGhhc1ByZXZWYWx1ZSA9IFwidlwiIGluIGF0b21TdGF0ZTtcbiAgY29uc3QgcHJldlZhbHVlID0gYXRvbVN0YXRlLnY7XG4gIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlT3JQcm9taXNlKSkge1xuICAgIGZvciAoY29uc3QgYSBvZiBhdG9tU3RhdGUuZC5rZXlzKCkpIHtcbiAgICAgIGFkZFBlbmRpbmdQcm9taXNlVG9EZXBlbmRlbmN5KFxuICAgICAgICBhdG9tLFxuICAgICAgICB2YWx1ZU9yUHJvbWlzZSxcbiAgICAgICAgZW5zdXJlQXRvbVN0YXRlMihzdG9yZSwgYSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGF0b21TdGF0ZS52ID0gdmFsdWVPclByb21pc2U7XG4gIGRlbGV0ZSBhdG9tU3RhdGUuZTtcbiAgaWYgKCFoYXNQcmV2VmFsdWUgfHwgIU9iamVjdC5pcyhwcmV2VmFsdWUsIGF0b21TdGF0ZS52KSkge1xuICAgICsrYXRvbVN0YXRlLm47XG4gICAgaWYgKGlzUHJvbWlzZUxpa2UocHJldlZhbHVlKSkge1xuICAgICAgYWJvcnRQcm9taXNlKHByZXZWYWx1ZSk7XG4gICAgfVxuICB9XG59O1xuY29uc3Qgc3RvcmVHZXQgPSAoc3RvcmUsIGF0b20pID0+IHtcbiAgY29uc3QgcmVhZEF0b21TdGF0ZTIgPSBnZXRJbnRlcm5hbEJ1aWxkaW5nQmxvY2tzKHN0b3JlKVsxNF07XG4gIHJldHVybiByZXR1cm5BdG9tVmFsdWUocmVhZEF0b21TdGF0ZTIoc3RvcmUsIGF0b20pKTtcbn07XG5jb25zdCBzdG9yZVNldCA9IChzdG9yZSwgYXRvbSwgLi4uYXJncykgPT4ge1xuICBjb25zdCBidWlsZGluZ0Jsb2NrcyA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpO1xuICBjb25zdCBmbHVzaENhbGxiYWNrczIgPSBidWlsZGluZ0Jsb2Nrc1sxMl07XG4gIGNvbnN0IHJlY29tcHV0ZUludmFsaWRhdGVkQXRvbXMyID0gYnVpbGRpbmdCbG9ja3NbMTNdO1xuICBjb25zdCB3cml0ZUF0b21TdGF0ZTIgPSBidWlsZGluZ0Jsb2Nrc1sxNl07XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdyaXRlQXRvbVN0YXRlMihzdG9yZSwgYXRvbSwgLi4uYXJncyk7XG4gIH0gZmluYWxseSB7XG4gICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tczIoc3RvcmUpO1xuICAgIGZsdXNoQ2FsbGJhY2tzMihzdG9yZSk7XG4gIH1cbn07XG5jb25zdCBzdG9yZVN1YiA9IChzdG9yZSwgYXRvbSwgbGlzdGVuZXIpID0+IHtcbiAgY29uc3QgYnVpbGRpbmdCbG9ja3MgPSBnZXRJbnRlcm5hbEJ1aWxkaW5nQmxvY2tzKHN0b3JlKTtcbiAgY29uc3QgZmx1c2hDYWxsYmFja3MyID0gYnVpbGRpbmdCbG9ja3NbMTJdO1xuICBjb25zdCBtb3VudEF0b20yID0gYnVpbGRpbmdCbG9ja3NbMThdO1xuICBjb25zdCB1bm1vdW50QXRvbTIgPSBidWlsZGluZ0Jsb2Nrc1sxOV07XG4gIGNvbnN0IG1vdW50ZWQgPSBtb3VudEF0b20yKHN0b3JlLCBhdG9tKTtcbiAgY29uc3QgbGlzdGVuZXJzID0gbW91bnRlZC5sO1xuICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgZmx1c2hDYWxsYmFja3MyKHN0b3JlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB1bm1vdW50QXRvbTIoc3RvcmUsIGF0b20pO1xuICAgIGZsdXNoQ2FsbGJhY2tzMihzdG9yZSk7XG4gIH07XG59O1xuY29uc3QgYnVpbGRpbmdCbG9ja01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyA9IChzdG9yZSkgPT4ge1xuICBjb25zdCBidWlsZGluZ0Jsb2NrcyA9IGJ1aWxkaW5nQmxvY2tNYXAuZ2V0KHN0b3JlKTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmICFidWlsZGluZ0Jsb2Nrcykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RvcmUgbXVzdCBiZSBjcmVhdGVkIGJ5IGJ1aWxkU3RvcmUgdG8gcmVhZCBpdHMgYnVpbGRpbmcgYmxvY2tzXCJcbiAgICApO1xuICB9XG4gIHJldHVybiBidWlsZGluZ0Jsb2Nrcztcbn07XG5mdW5jdGlvbiBnZXRCdWlsZGluZ0Jsb2NrcyhzdG9yZSkge1xuICBjb25zdCBidWlsZGluZ0Jsb2NrcyA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpO1xuICBjb25zdCBlbmhhbmNlQnVpbGRpbmdCbG9ja3MgPSBidWlsZGluZ0Jsb2Nrc1syNF07XG4gIGlmIChlbmhhbmNlQnVpbGRpbmdCbG9ja3MpIHtcbiAgICByZXR1cm4gZW5oYW5jZUJ1aWxkaW5nQmxvY2tzKGJ1aWxkaW5nQmxvY2tzKTtcbiAgfVxuICByZXR1cm4gYnVpbGRpbmdCbG9ja3M7XG59XG5mdW5jdGlvbiBidWlsZFN0b3JlKC4uLmJ1aWxkQXJncykge1xuICBjb25zdCBzdG9yZSA9IHtcbiAgICBnZXQoYXRvbSkge1xuICAgICAgY29uc3Qgc3RvcmVHZXQyID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSlbMjFdO1xuICAgICAgcmV0dXJuIHN0b3JlR2V0MihzdG9yZSwgYXRvbSk7XG4gICAgfSxcbiAgICBzZXQoYXRvbSwgLi4uYXJncykge1xuICAgICAgY29uc3Qgc3RvcmVTZXQyID0gZ2V0SW50ZXJuYWxCdWlsZGluZ0Jsb2NrcyhzdG9yZSlbMjJdO1xuICAgICAgcmV0dXJuIHN0b3JlU2V0MihzdG9yZSwgYXRvbSwgLi4uYXJncyk7XG4gICAgfSxcbiAgICBzdWIoYXRvbSwgbGlzdGVuZXIpIHtcbiAgICAgIGNvbnN0IHN0b3JlU3ViMiA9IGdldEludGVybmFsQnVpbGRpbmdCbG9ja3Moc3RvcmUpWzIzXTtcbiAgICAgIHJldHVybiBzdG9yZVN1YjIoc3RvcmUsIGF0b20sIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGJ1aWxkaW5nQmxvY2tzID0gW1xuICAgIC8vIHN0b3JlIHN0YXRlXG4gICAgLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgLy8gYXRvbVN0YXRlTWFwXG4gICAgLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgLy8gbW91bnRlZE1hcFxuICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLFxuICAgIC8vIGludmFsaWRhdGVkQXRvbXNcbiAgICAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLFxuICAgIC8vIGNoYW5nZWRBdG9tc1xuICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksXG4gICAgLy8gbW91bnRDYWxsYmFja3NcbiAgICAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLFxuICAgIC8vIHVubW91bnRDYWxsYmFja3NcbiAgICB7fSxcbiAgICAvLyBzdG9yZUhvb2tzXG4gICAgLy8gYXRvbSBpbnRlcmNlcHRvcnNcbiAgICBhdG9tUmVhZCxcbiAgICBhdG9tV3JpdGUsXG4gICAgYXRvbU9uSW5pdCxcbiAgICBhdG9tT25Nb3VudCxcbiAgICAvLyBidWlsZGluZy1ibG9jayBmdW5jdGlvbnNcbiAgICBlbnN1cmVBdG9tU3RhdGUsXG4gICAgZmx1c2hDYWxsYmFja3MsXG4gICAgcmVjb21wdXRlSW52YWxpZGF0ZWRBdG9tcyxcbiAgICByZWFkQXRvbVN0YXRlLFxuICAgIGludmFsaWRhdGVEZXBlbmRlbnRzLFxuICAgIHdyaXRlQXRvbVN0YXRlLFxuICAgIG1vdW50RGVwZW5kZW5jaWVzLFxuICAgIG1vdW50QXRvbSxcbiAgICB1bm1vdW50QXRvbSxcbiAgICBzZXRBdG9tU3RhdGVWYWx1ZU9yUHJvbWlzZSxcbiAgICBzdG9yZUdldCxcbiAgICBzdG9yZVNldCxcbiAgICBzdG9yZVN1YixcbiAgICB2b2lkIDBcbiAgXS5tYXAoKGZuLCBpKSA9PiBidWlsZEFyZ3NbaV0gfHwgZm4pO1xuICBidWlsZGluZ0Jsb2NrTWFwLnNldChzdG9yZSwgT2JqZWN0LmZyZWV6ZShidWlsZGluZ0Jsb2NrcykpO1xuICByZXR1cm4gc3RvcmU7XG59XG5cbmV4cG9ydCB7IGFib3J0UHJvbWlzZSBhcyBJTlRFUk5BTF9hYm9ydFByb21pc2UsIGFkZFBlbmRpbmdQcm9taXNlVG9EZXBlbmRlbmN5IGFzIElOVEVSTkFMX2FkZFBlbmRpbmdQcm9taXNlVG9EZXBlbmRlbmN5LCBidWlsZFN0b3JlIGFzIElOVEVSTkFMX2J1aWxkU3RvcmVSZXYyLCBnZXRCdWlsZGluZ0Jsb2NrcyBhcyBJTlRFUk5BTF9nZXRCdWlsZGluZ0Jsb2Nrc1JldjIsIGdldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzIGFzIElOVEVSTkFMX2dldE1vdW50ZWRPclBlbmRpbmdEZXBlbmRlbnRzLCBoYXNJbml0aWFsVmFsdWUgYXMgSU5URVJOQUxfaGFzSW5pdGlhbFZhbHVlLCBpbml0aWFsaXplU3RvcmVIb29rcyBhcyBJTlRFUk5BTF9pbml0aWFsaXplU3RvcmVIb29rc1JldjIsIGlzQWN0dWFsbHlXcml0YWJsZUF0b20gYXMgSU5URVJOQUxfaXNBY3R1YWxseVdyaXRhYmxlQXRvbSwgaXNBdG9tU3RhdGVJbml0aWFsaXplZCBhcyBJTlRFUk5BTF9pc0F0b21TdGF0ZUluaXRpYWxpemVkLCBpc1BlbmRpbmdQcm9taXNlIGFzIElOVEVSTkFMX2lzUGVuZGluZ1Byb21pc2UsIGlzUHJvbWlzZUxpa2UgYXMgSU5URVJOQUxfaXNQcm9taXNlTGlrZSwgcHJvbWlzZVN0YXRlTWFwIGFzIElOVEVSTkFMX3Byb21pc2VTdGF0ZU1hcCwgcmVnaXN0ZXJBYm9ydEhhbmRsZXIgYXMgSU5URVJOQUxfcmVnaXN0ZXJBYm9ydEhhbmRsZXIsIHJldHVybkF0b21WYWx1ZSBhcyBJTlRFUk5BTF9yZXR1cm5BdG9tVmFsdWUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/internals.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/utils.mjs":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/utils.mjs ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESET: () => (/* binding */ RESET),\n/* harmony export */   atomFamily: () => (/* binding */ atomFamily),\n/* harmony export */   atomWithDefault: () => (/* binding */ atomWithDefault),\n/* harmony export */   atomWithLazy: () => (/* binding */ atomWithLazy),\n/* harmony export */   atomWithObservable: () => (/* binding */ atomWithObservable),\n/* harmony export */   atomWithReducer: () => (/* binding */ atomWithReducer),\n/* harmony export */   atomWithRefresh: () => (/* binding */ atomWithRefresh),\n/* harmony export */   atomWithReset: () => (/* binding */ atomWithReset),\n/* harmony export */   atomWithStorage: () => (/* binding */ atomWithStorage),\n/* harmony export */   createJSONStorage: () => (/* binding */ createJSONStorage),\n/* harmony export */   freezeAtom: () => (/* binding */ freezeAtom),\n/* harmony export */   freezeAtomCreator: () => (/* binding */ freezeAtomCreator),\n/* harmony export */   loadable: () => (/* binding */ loadable),\n/* harmony export */   selectAtom: () => (/* binding */ selectAtom),\n/* harmony export */   splitAtom: () => (/* binding */ splitAtom),\n/* harmony export */   unstable_withStorageValidator: () => (/* binding */ withStorageValidator),\n/* harmony export */   unwrap: () => (/* binding */ unwrap)\n/* harmony export */ });\n/* harmony import */ var jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jotai/vanilla */ \"(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla.mjs\");\n\n\nconst RESET = Symbol(\n  ( false ? 0 : void 0) !== \"production\" ? \"RESET\" : \"\"\n);\n\nfunction atomWithReset(initialValue) {\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    initialValue,\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(anAtom)) : update;\n      set(anAtom, nextValue === RESET ? initialValue : nextValue);\n    }\n  );\n  return anAtom;\n}\n\nfunction atomWithReducer(initialValue, reducer) {\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(initialValue, function(get, set, action) {\n    set(this, reducer(get(this), action));\n  });\n}\n\nfunction atomFamily(initializeAtom, areEqual) {\n  let shouldRemove = null;\n  const atoms = /* @__PURE__ */ new Map();\n  const listeners = /* @__PURE__ */ new Set();\n  const createAtom = (param) => {\n    let item;\n    if (areEqual === void 0) {\n      item = atoms.get(param);\n    } else {\n      for (const [key, value] of atoms) {\n        if (areEqual(key, param)) {\n          item = value;\n          break;\n        }\n      }\n    }\n    if (item !== void 0) {\n      if (shouldRemove == null ? void 0 : shouldRemove(item[1], param)) {\n        createAtom.remove(param);\n      } else {\n        return item[0];\n      }\n    }\n    const newAtom = initializeAtom(param);\n    atoms.set(param, [newAtom, Date.now()]);\n    notifyListeners(\"CREATE\", param, newAtom);\n    return newAtom;\n  };\n  const notifyListeners = (type, param, atom) => {\n    for (const listener of listeners) {\n      listener({ type, param, atom });\n    }\n  };\n  createAtom.unstable_listen = (callback) => {\n    listeners.add(callback);\n    return () => {\n      listeners.delete(callback);\n    };\n  };\n  createAtom.getParams = () => atoms.keys();\n  createAtom.remove = (param) => {\n    if (areEqual === void 0) {\n      if (!atoms.has(param)) return;\n      const [atom] = atoms.get(param);\n      atoms.delete(param);\n      notifyListeners(\"REMOVE\", param, atom);\n    } else {\n      for (const [key, [atom]] of atoms) {\n        if (areEqual(key, param)) {\n          atoms.delete(key);\n          notifyListeners(\"REMOVE\", key, atom);\n          break;\n        }\n      }\n    }\n  };\n  createAtom.setShouldRemove = (fn) => {\n    shouldRemove = fn;\n    if (!shouldRemove) return;\n    for (const [key, [atom, createdAt]] of atoms) {\n      if (shouldRemove(createdAt, key)) {\n        atoms.delete(key);\n        notifyListeners(\"REMOVE\", key, atom);\n      }\n    }\n  };\n  return createAtom;\n}\n\nconst getCached$2 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$3 = /* @__PURE__ */ new WeakMap();\nconst memo3 = (create, dep1, dep2, dep3) => {\n  const cache2 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache1$3, dep1);\n  const cache3 = getCached$2(() => /* @__PURE__ */ new WeakMap(), cache2, dep2);\n  return getCached$2(create, cache3, dep3);\n};\nfunction selectAtom(anAtom, selector, equalityFn = Object.is) {\n  return memo3(\n    () => {\n      const EMPTY = Symbol();\n      const selectValue = ([value, prevSlice]) => {\n        if (prevSlice === EMPTY) {\n          return selector(value);\n        }\n        const slice = selector(value, prevSlice);\n        return equalityFn(prevSlice, slice) ? prevSlice : slice;\n      };\n      const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(derivedAtom);\n        const value = get(anAtom);\n        return selectValue([value, prev]);\n      });\n      derivedAtom.init = EMPTY;\n      return derivedAtom;\n    },\n    anAtom,\n    selector,\n    equalityFn\n  );\n}\n\nconst frozenAtoms = /* @__PURE__ */ new WeakSet();\nconst deepFreeze = (value) => {\n  if (typeof value !== \"object\" || value === null) {\n    return value;\n  }\n  Object.freeze(value);\n  const propNames = Object.getOwnPropertyNames(value);\n  for (const name of propNames) {\n    deepFreeze(value[name]);\n  }\n  return value;\n};\nfunction freezeAtom(anAtom) {\n  if (frozenAtoms.has(anAtom)) {\n    return anAtom;\n  }\n  frozenAtoms.add(anAtom);\n  const origRead = anAtom.read;\n  anAtom.read = function(get, options) {\n    return deepFreeze(origRead.call(this, get, options));\n  };\n  if (\"write\" in anAtom) {\n    const origWrite = anAtom.write;\n    anAtom.write = function(get, set, ...args) {\n      return origWrite.call(\n        this,\n        get,\n        (...setArgs) => {\n          if (setArgs[0] === anAtom) {\n            setArgs[1] = deepFreeze(setArgs[1]);\n          }\n          return set(...setArgs);\n        },\n        ...args\n      );\n    };\n  }\n  return anAtom;\n}\nfunction freezeAtomCreator(createAtom) {\n  if (( false ? 0 : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] freezeAtomCreator is deprecated, define it on users end\"\n    );\n  }\n  return ((...args) => freezeAtom(createAtom(...args)));\n}\n\nconst getCached$1 = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1$2 = /* @__PURE__ */ new WeakMap();\nconst memo2$1 = (create, dep1, dep2) => {\n  const cache2 = getCached$1(() => /* @__PURE__ */ new WeakMap(), cache1$2, dep1);\n  return getCached$1(create, cache2, dep2);\n};\nconst cacheKeyForEmptyKeyExtractor = {};\nconst isWritable = (atom2) => !!atom2.write;\nconst isFunction = (x) => typeof x === \"function\";\nfunction splitAtom(arrAtom, keyExtractor) {\n  return memo2$1(\n    () => {\n      const mappingCache = /* @__PURE__ */ new WeakMap();\n      const getMapping = (arr, prev) => {\n        let mapping = mappingCache.get(arr);\n        if (mapping) {\n          return mapping;\n        }\n        const prevMapping = prev && mappingCache.get(prev);\n        const atomList = [];\n        const keyList = [];\n        arr.forEach((item, index) => {\n          const key = keyExtractor ? keyExtractor(item) : index;\n          keyList[index] = key;\n          const cachedAtom = prevMapping && prevMapping.atomList[prevMapping.keyList.indexOf(key)];\n          if (cachedAtom) {\n            atomList[index] = cachedAtom;\n            return;\n          }\n          const read = (get) => {\n            const prev2 = get(mappingAtom);\n            const currArr = get(arrAtom);\n            const mapping2 = getMapping(currArr, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= currArr.length) {\n              const prevItem = arr[getMapping(arr).keyList.indexOf(key)];\n              if (prevItem) {\n                return prevItem;\n              }\n              throw new Error(\"splitAtom: index out of bounds for read\");\n            }\n            return currArr[index2];\n          };\n          const write = (get, set, update) => {\n            const prev2 = get(mappingAtom);\n            const arr2 = get(arrAtom);\n            const mapping2 = getMapping(arr2, prev2 == null ? void 0 : prev2.arr);\n            const index2 = mapping2.keyList.indexOf(key);\n            if (index2 < 0 || index2 >= arr2.length) {\n              throw new Error(\"splitAtom: index out of bounds for write\");\n            }\n            const nextItem = isFunction(update) ? update(arr2[index2]) : update;\n            if (!Object.is(arr2[index2], nextItem)) {\n              set(arrAtom, [\n                ...arr2.slice(0, index2),\n                nextItem,\n                ...arr2.slice(index2 + 1)\n              ]);\n            }\n          };\n          atomList[index] = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read, write) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(read);\n        });\n        if (prevMapping && prevMapping.keyList.length === keyList.length && prevMapping.keyList.every((x, i) => x === keyList[i])) {\n          mapping = prevMapping;\n        } else {\n          mapping = { arr, atomList, keyList };\n        }\n        mappingCache.set(arr, mapping);\n        return mapping;\n      };\n      const mappingAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n        const prev = get(mappingAtom);\n        const arr = get(arrAtom);\n        const mapping = getMapping(arr, prev == null ? void 0 : prev.arr);\n        return mapping;\n      });\n      if (( false ? 0 : void 0) !== \"production\") {\n        mappingAtom.debugPrivate = true;\n      }\n      mappingAtom.init = void 0;\n      const splittedAtom = isWritable(arrAtom) ? (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => get(mappingAtom).atomList,\n        (get, set, action) => {\n          switch (action.type) {\n            case \"remove\": {\n              const index = get(splittedAtom).indexOf(action.atom);\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  ...arr.slice(index + 1)\n                ]);\n              }\n              break;\n            }\n            case \"insert\": {\n              const index = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index >= 0) {\n                const arr = get(arrAtom);\n                set(arrAtom, [\n                  ...arr.slice(0, index),\n                  action.value,\n                  ...arr.slice(index)\n                ]);\n              }\n              break;\n            }\n            case \"move\": {\n              const index1 = get(splittedAtom).indexOf(action.atom);\n              const index2 = action.before ? get(splittedAtom).indexOf(action.before) : get(splittedAtom).length;\n              if (index1 >= 0 && index2 >= 0) {\n                const arr = get(arrAtom);\n                if (index1 < index2) {\n                  set(arrAtom, [\n                    ...arr.slice(0, index1),\n                    ...arr.slice(index1 + 1, index2),\n                    arr[index1],\n                    ...arr.slice(index2)\n                  ]);\n                } else {\n                  set(arrAtom, [\n                    ...arr.slice(0, index2),\n                    arr[index1],\n                    ...arr.slice(index2, index1),\n                    ...arr.slice(index1 + 1)\n                  ]);\n                }\n              }\n              break;\n            }\n          }\n        }\n      ) : (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(mappingAtom).atomList);\n      return splittedAtom;\n    },\n    arrAtom,\n    keyExtractor || cacheKeyForEmptyKeyExtractor\n  );\n}\n\nfunction atomWithDefault(getDefault) {\n  const EMPTY = Symbol();\n  const overwrittenAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(EMPTY);\n  if (( false ? 0 : void 0) !== \"production\") {\n    overwrittenAtom.debugPrivate = true;\n  }\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      const overwritten = get(overwrittenAtom);\n      if (overwritten !== EMPTY) {\n        return overwritten;\n      }\n      return getDefault(get, options);\n    },\n    (get, set, update) => {\n      const newValue = typeof update === \"function\" ? update(get(anAtom)) : update;\n      set(overwrittenAtom, newValue === RESET ? EMPTY : newValue);\n    }\n  );\n  return anAtom;\n}\n\nconst isPromiseLike$3 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nfunction withStorageValidator(validator) {\n  return (unknownStorage) => {\n    const storage = {\n      ...unknownStorage,\n      getItem: (key, initialValue) => {\n        const validate = (value2) => {\n          if (!validator(value2)) {\n            return initialValue;\n          }\n          return value2;\n        };\n        const value = unknownStorage.getItem(key, initialValue);\n        if (isPromiseLike$3(value)) {\n          return value.then(validate);\n        }\n        return validate(value);\n      }\n    };\n    return storage;\n  };\n}\nfunction createJSONStorage(getStringStorage = () => {\n  try {\n    return window.localStorage;\n  } catch (e) {\n    if (( false ? 0 : void 0) !== \"production\") {\n      if (typeof window !== \"undefined\") {\n        console.warn(e);\n      }\n    }\n    return void 0;\n  }\n}, options) {\n  var _a;\n  let lastStr;\n  let lastValue;\n  const storage = {\n    getItem: (key, initialValue) => {\n      var _a2, _b;\n      const parse = (str2) => {\n        str2 = str2 || \"\";\n        if (lastStr !== str2) {\n          try {\n            lastValue = JSON.parse(str2, options == null ? void 0 : options.reviver);\n          } catch (e) {\n            return initialValue;\n          }\n          lastStr = str2;\n        }\n        return lastValue;\n      };\n      const str = (_b = (_a2 = getStringStorage()) == null ? void 0 : _a2.getItem(key)) != null ? _b : null;\n      if (isPromiseLike$3(str)) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (key, newValue) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.setItem(\n        key,\n        JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n      );\n    },\n    removeItem: (key) => {\n      var _a2;\n      return (_a2 = getStringStorage()) == null ? void 0 : _a2.removeItem(key);\n    }\n  };\n  const createHandleSubscribe = (subscriber2) => (key, callback, initialValue) => subscriber2(key, (v) => {\n    let newValue;\n    try {\n      newValue = JSON.parse(v || \"\");\n    } catch (e) {\n      newValue = initialValue;\n    }\n    callback(newValue);\n  });\n  let subscriber;\n  try {\n    subscriber = (_a = getStringStorage()) == null ? void 0 : _a.subscribe;\n  } catch (e) {\n  }\n  if (!subscriber && typeof window !== \"undefined\" && typeof window.addEventListener === \"function\" && window.Storage) {\n    subscriber = (key, callback) => {\n      if (!(getStringStorage() instanceof window.Storage)) {\n        return () => {\n        };\n      }\n      const storageEventCallback = (e) => {\n        if (e.storageArea === getStringStorage() && e.key === key) {\n          callback(e.newValue);\n        }\n      };\n      window.addEventListener(\"storage\", storageEventCallback);\n      return () => {\n        window.removeEventListener(\"storage\", storageEventCallback);\n      };\n    };\n  }\n  if (subscriber) {\n    storage.subscribe = createHandleSubscribe(subscriber);\n  }\n  return storage;\n}\nconst defaultStorage = createJSONStorage();\nfunction atomWithStorage(key, initialValue, storage = defaultStorage, options) {\n  const getOnInit = options == null ? void 0 : options.getOnInit;\n  const baseAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    getOnInit ? storage.getItem(key, initialValue) : initialValue\n  );\n  if (( false ? 0 : void 0) !== \"production\") {\n    baseAtom.debugPrivate = true;\n  }\n  baseAtom.onMount = (setAtom) => {\n    setAtom(storage.getItem(key, initialValue));\n    let unsub;\n    if (storage.subscribe) {\n      unsub = storage.subscribe(key, setAtom, initialValue);\n    }\n    return unsub;\n  };\n  const anAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => get(baseAtom),\n    (get, set, update) => {\n      const nextValue = typeof update === \"function\" ? update(get(baseAtom)) : update;\n      if (nextValue === RESET) {\n        set(baseAtom, initialValue);\n        return storage.removeItem(key);\n      }\n      if (isPromiseLike$3(nextValue)) {\n        return nextValue.then((resolvedValue) => {\n          set(baseAtom, resolvedValue);\n          return storage.setItem(key, resolvedValue);\n        });\n      }\n      set(baseAtom, nextValue);\n      return storage.setItem(key, nextValue);\n    }\n  );\n  return anAtom;\n}\n\nconst isPromiseLike$2 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nfunction atomWithObservable(getObservable, options) {\n  const returnResultData = (result) => {\n    if (\"e\" in result) {\n      throw result.e;\n    }\n    return result.d;\n  };\n  const observableResultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => {\n    var _a;\n    let observable = getObservable(get);\n    const itself = (_a = observable[Symbol.observable]) == null ? void 0 : _a.call(observable);\n    if (itself) {\n      observable = itself;\n    }\n    let resolve;\n    const makePending = () => new Promise((r) => {\n      resolve = r;\n    });\n    const initialResult = options && \"initialValue\" in options ? {\n      d: typeof options.initialValue === \"function\" ? options.initialValue() : options.initialValue\n    } : makePending();\n    let setResult;\n    let lastResult;\n    const listener = (result) => {\n      lastResult = result;\n      resolve == null ? void 0 : resolve(result);\n      setResult == null ? void 0 : setResult(result);\n    };\n    let subscription;\n    let timer;\n    const isNotMounted = () => !setResult;\n    const unsubscribe = () => {\n      if (subscription) {\n        subscription.unsubscribe();\n        subscription = void 0;\n      }\n    };\n    const start = () => {\n      if (subscription) {\n        clearTimeout(timer);\n        subscription.unsubscribe();\n      }\n      subscription = observable.subscribe({\n        next: (d) => listener({ d }),\n        error: (e) => listener({ e }),\n        complete: () => {\n        }\n      });\n      if (isNotMounted() && (options == null ? void 0 : options.unstable_timeout)) {\n        timer = setTimeout(unsubscribe, options.unstable_timeout);\n      }\n    };\n    start();\n    const resultAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(lastResult || initialResult);\n    if (( false ? 0 : void 0) !== \"production\") {\n      resultAtom.debugPrivate = true;\n    }\n    resultAtom.onMount = (update) => {\n      setResult = update;\n      if (lastResult) {\n        update(lastResult);\n      }\n      if (subscription) {\n        clearTimeout(timer);\n      } else {\n        start();\n      }\n      return () => {\n        setResult = void 0;\n        if (options == null ? void 0 : options.unstable_timeout) {\n          timer = setTimeout(unsubscribe, options.unstable_timeout);\n        } else {\n          unsubscribe();\n        }\n      };\n    };\n    return [resultAtom, observable, makePending, start, isNotMounted];\n  });\n  if (( false ? 0 : void 0) !== \"production\") {\n    observableResultAtom.debugPrivate = true;\n  }\n  const observableAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get) => {\n      const [resultAtom] = get(observableResultAtom);\n      const result = get(resultAtom);\n      if (isPromiseLike$2(result)) {\n        return result.then(returnResultData);\n      }\n      return returnResultData(result);\n    },\n    (get, set, data) => {\n      const [resultAtom, observable, makePending, start, isNotMounted] = get(observableResultAtom);\n      if (\"next\" in observable) {\n        if (isNotMounted()) {\n          set(resultAtom, makePending());\n          start();\n        }\n        observable.next(data);\n      } else {\n        throw new Error(\"observable is not subject\");\n      }\n    }\n  );\n  return observableAtom;\n}\n\nconst cache1$1 = /* @__PURE__ */ new WeakMap();\nconst memo1 = (create, dep1) => (cache1$1.has(dep1) ? cache1$1 : cache1$1.set(dep1, create())).get(dep1);\nconst isPromiseLike$1 = (p) => typeof (p == null ? void 0 : p.then) === \"function\";\nconst LOADING = { state: \"loading\" };\nfunction loadable(anAtom) {\n  return memo1(() => {\n    const loadableCache = /* @__PURE__ */ new WeakMap();\n    const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n    if (( false ? 0 : void 0) !== \"production\") {\n      refreshAtom.debugPrivate = true;\n    }\n    const derivedAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n      (get, { setSelf }) => {\n        get(refreshAtom);\n        let value;\n        try {\n          value = get(anAtom);\n        } catch (error) {\n          return { state: \"hasError\", error };\n        }\n        if (!isPromiseLike$1(value)) {\n          return { state: \"hasData\", data: value };\n        }\n        const promise = value;\n        const cached1 = loadableCache.get(promise);\n        if (cached1) {\n          return cached1;\n        }\n        promise.then(\n          (data) => {\n            loadableCache.set(promise, { state: \"hasData\", data });\n            setSelf();\n          },\n          (error) => {\n            loadableCache.set(promise, { state: \"hasError\", error });\n            setSelf();\n          }\n        );\n        const cached2 = loadableCache.get(promise);\n        if (cached2) {\n          return cached2;\n        }\n        loadableCache.set(promise, LOADING);\n        return LOADING;\n      },\n      (_get, set) => {\n        set(refreshAtom, (c) => c + 1);\n      }\n    );\n    if (( false ? 0 : void 0) !== \"production\") {\n      derivedAtom.debugPrivate = true;\n    }\n    return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)((get) => get(derivedAtom));\n  }, anAtom);\n}\n\nconst getCached = (c, m, k) => (m.has(k) ? m : m.set(k, c())).get(k);\nconst cache1 = /* @__PURE__ */ new WeakMap();\nconst memo2 = (create, dep1, dep2) => {\n  const cache2 = getCached(() => /* @__PURE__ */ new WeakMap(), cache1, dep1);\n  return getCached(create, cache2, dep2);\n};\nconst isPromiseLike = (p) => typeof (p == null ? void 0 : p.then) === \"function\";\nconst defaultFallback = () => void 0;\nfunction unwrap(anAtom, fallback = defaultFallback) {\n  return memo2(\n    () => {\n      const promiseErrorCache = /* @__PURE__ */ new WeakMap();\n      const promiseResultCache = /* @__PURE__ */ new WeakMap();\n      const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n      if (( false ? 0 : void 0) !== \"production\") {\n        refreshAtom.debugPrivate = true;\n      }\n      const promiseAndValueAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get, { setSelf }) => {\n          get(refreshAtom);\n          const prev = get(promiseAndValueAtom);\n          const promise = get(anAtom);\n          if (!isPromiseLike(promise)) {\n            return { v: promise };\n          }\n          if (promise !== (prev == null ? void 0 : prev.p)) {\n            promise.then(\n              (v) => {\n                promiseResultCache.set(promise, v);\n                setSelf();\n              },\n              (e) => {\n                promiseErrorCache.set(promise, e);\n                setSelf();\n              }\n            );\n          }\n          if (promiseErrorCache.has(promise)) {\n            throw promiseErrorCache.get(promise);\n          }\n          if (promiseResultCache.has(promise)) {\n            return {\n              p: promise,\n              v: promiseResultCache.get(promise)\n            };\n          }\n          if (prev && \"v\" in prev) {\n            return { p: promise, f: fallback(prev.v), v: prev.v };\n          }\n          return { p: promise, f: fallback() };\n        },\n        (_get, set) => {\n          set(refreshAtom, (c) => c + 1);\n        }\n      );\n      promiseAndValueAtom.init = void 0;\n      if (( false ? 0 : void 0) !== \"production\") {\n        promiseAndValueAtom.debugPrivate = true;\n      }\n      return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n        (get) => {\n          const state = get(promiseAndValueAtom);\n          if (\"f\" in state) {\n            return state.f;\n          }\n          return state.v;\n        },\n        (_get, set, ...args) => set(anAtom, ...args)\n      );\n    },\n    anAtom,\n    fallback\n  );\n}\n\nfunction atomWithRefresh(read, write) {\n  const refreshAtom = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(0);\n  if (( false ? 0 : void 0) !== \"production\") {\n    refreshAtom.debugPrivate = true;\n  }\n  return (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(\n    (get, options) => {\n      get(refreshAtom);\n      return read(get, options);\n    },\n    (get, set, ...args) => {\n      if (args.length === 0) {\n        set(refreshAtom, (c) => c + 1);\n      } else if (write) {\n        return write(get, set, ...args);\n      } else if (( false ? 0 : void 0) !== \"production\") {\n        throw new Error(\"refresh must be called without arguments\");\n      }\n    }\n  );\n}\n\nfunction atomWithLazy(makeInitial) {\n  const a = (0,jotai_vanilla__WEBPACK_IMPORTED_MODULE_0__.atom)(void 0);\n  delete a.init;\n  Object.defineProperty(a, \"init\", {\n    get() {\n      return makeInitial();\n    }\n  });\n  return a;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFDOztBQUVyQztBQUNBLEdBQUcsTUFBZSxHQUFHLENBQW9CO0FBQ3pDOztBQUVBO0FBQ0EsaUJBQWlCLG1EQUFJO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTLG1EQUFJO0FBQ2I7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbURBQUk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LG1EQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLG1EQUFJO0FBQzFCLE9BQU8sTUFBZSxHQUFHLENBQW9CO0FBQzdDO0FBQ0E7QUFDQSxTQUFTLG1EQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVEsVUFBVSxNQUFlLEdBQUcsQ0FBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksbURBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVvUyIsInNvdXJjZXMiOlsiL1VzZXJzL2ppYXdlbnpodS9EZXZlbG9wZXIvSmFzdGFsa192YXBpL2NsaWVudC9ub2RlX21vZHVsZXMvLnBucG0vam90YWlAMi4xNS4wX0B0eXBlcytyZWFjdEAxOS4wLjdfcmVhY3RAMTkuMC4wL25vZGVfbW9kdWxlcy9qb3RhaS9lc20vdmFuaWxsYS91dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXRvbSB9IGZyb20gJ2pvdGFpL3ZhbmlsbGEnO1xuXG5jb25zdCBSRVNFVCA9IFN5bWJvbChcbiAgKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgPyBcIlJFU0VUXCIgOiBcIlwiXG4pO1xuXG5mdW5jdGlvbiBhdG9tV2l0aFJlc2V0KGluaXRpYWxWYWx1ZSkge1xuICBjb25zdCBhbkF0b20gPSBhdG9tKFxuICAgIGluaXRpYWxWYWx1ZSxcbiAgICAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gdHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlKGdldChhbkF0b20pKSA6IHVwZGF0ZTtcbiAgICAgIHNldChhbkF0b20sIG5leHRWYWx1ZSA9PT0gUkVTRVQgPyBpbml0aWFsVmFsdWUgOiBuZXh0VmFsdWUpO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGFuQXRvbTtcbn1cblxuZnVuY3Rpb24gYXRvbVdpdGhSZWR1Y2VyKGluaXRpYWxWYWx1ZSwgcmVkdWNlcikge1xuICByZXR1cm4gYXRvbShpbml0aWFsVmFsdWUsIGZ1bmN0aW9uKGdldCwgc2V0LCBhY3Rpb24pIHtcbiAgICBzZXQodGhpcywgcmVkdWNlcihnZXQodGhpcyksIGFjdGlvbikpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXRvbUZhbWlseShpbml0aWFsaXplQXRvbSwgYXJlRXF1YWwpIHtcbiAgbGV0IHNob3VsZFJlbW92ZSA9IG51bGw7XG4gIGNvbnN0IGF0b21zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgY29uc3QgbGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgY3JlYXRlQXRvbSA9IChwYXJhbSkgPT4ge1xuICAgIGxldCBpdGVtO1xuICAgIGlmIChhcmVFcXVhbCA9PT0gdm9pZCAwKSB7XG4gICAgICBpdGVtID0gYXRvbXMuZ2V0KHBhcmFtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgYXRvbXMpIHtcbiAgICAgICAgaWYgKGFyZUVxdWFsKGtleSwgcGFyYW0pKSB7XG4gICAgICAgICAgaXRlbSA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdGVtICE9PSB2b2lkIDApIHtcbiAgICAgIGlmIChzaG91bGRSZW1vdmUgPT0gbnVsbCA/IHZvaWQgMCA6IHNob3VsZFJlbW92ZShpdGVtWzFdLCBwYXJhbSkpIHtcbiAgICAgICAgY3JlYXRlQXRvbS5yZW1vdmUocGFyYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1bMF07XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0F0b20gPSBpbml0aWFsaXplQXRvbShwYXJhbSk7XG4gICAgYXRvbXMuc2V0KHBhcmFtLCBbbmV3QXRvbSwgRGF0ZS5ub3coKV0pO1xuICAgIG5vdGlmeUxpc3RlbmVycyhcIkNSRUFURVwiLCBwYXJhbSwgbmV3QXRvbSk7XG4gICAgcmV0dXJuIG5ld0F0b207XG4gIH07XG4gIGNvbnN0IG5vdGlmeUxpc3RlbmVycyA9ICh0eXBlLCBwYXJhbSwgYXRvbSkgPT4ge1xuICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcih7IHR5cGUsIHBhcmFtLCBhdG9tIH0pO1xuICAgIH1cbiAgfTtcbiAgY3JlYXRlQXRvbS51bnN0YWJsZV9saXN0ZW4gPSAoY2FsbGJhY2spID0+IHtcbiAgICBsaXN0ZW5lcnMuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfTtcbiAgY3JlYXRlQXRvbS5nZXRQYXJhbXMgPSAoKSA9PiBhdG9tcy5rZXlzKCk7XG4gIGNyZWF0ZUF0b20ucmVtb3ZlID0gKHBhcmFtKSA9PiB7XG4gICAgaWYgKGFyZUVxdWFsID09PSB2b2lkIDApIHtcbiAgICAgIGlmICghYXRvbXMuaGFzKHBhcmFtKSkgcmV0dXJuO1xuICAgICAgY29uc3QgW2F0b21dID0gYXRvbXMuZ2V0KHBhcmFtKTtcbiAgICAgIGF0b21zLmRlbGV0ZShwYXJhbSk7XG4gICAgICBub3RpZnlMaXN0ZW5lcnMoXCJSRU1PVkVcIiwgcGFyYW0sIGF0b20pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIFthdG9tXV0gb2YgYXRvbXMpIHtcbiAgICAgICAgaWYgKGFyZUVxdWFsKGtleSwgcGFyYW0pKSB7XG4gICAgICAgICAgYXRvbXMuZGVsZXRlKGtleSk7XG4gICAgICAgICAgbm90aWZ5TGlzdGVuZXJzKFwiUkVNT1ZFXCIsIGtleSwgYXRvbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNyZWF0ZUF0b20uc2V0U2hvdWxkUmVtb3ZlID0gKGZuKSA9PiB7XG4gICAgc2hvdWxkUmVtb3ZlID0gZm47XG4gICAgaWYgKCFzaG91bGRSZW1vdmUpIHJldHVybjtcbiAgICBmb3IgKGNvbnN0IFtrZXksIFthdG9tLCBjcmVhdGVkQXRdXSBvZiBhdG9tcykge1xuICAgICAgaWYgKHNob3VsZFJlbW92ZShjcmVhdGVkQXQsIGtleSkpIHtcbiAgICAgICAgYXRvbXMuZGVsZXRlKGtleSk7XG4gICAgICAgIG5vdGlmeUxpc3RlbmVycyhcIlJFTU9WRVwiLCBrZXksIGF0b20pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGNyZWF0ZUF0b207XG59XG5cbmNvbnN0IGdldENhY2hlZCQyID0gKGMsIG0sIGspID0+IChtLmhhcyhrKSA/IG0gOiBtLnNldChrLCBjKCkpKS5nZXQoayk7XG5jb25zdCBjYWNoZTEkMyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgbWVtbzMgPSAoY3JlYXRlLCBkZXAxLCBkZXAyLCBkZXAzKSA9PiB7XG4gIGNvbnN0IGNhY2hlMiA9IGdldENhY2hlZCQyKCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjYWNoZTEkMywgZGVwMSk7XG4gIGNvbnN0IGNhY2hlMyA9IGdldENhY2hlZCQyKCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjYWNoZTIsIGRlcDIpO1xuICByZXR1cm4gZ2V0Q2FjaGVkJDIoY3JlYXRlLCBjYWNoZTMsIGRlcDMpO1xufTtcbmZ1bmN0aW9uIHNlbGVjdEF0b20oYW5BdG9tLCBzZWxlY3RvciwgZXF1YWxpdHlGbiA9IE9iamVjdC5pcykge1xuICByZXR1cm4gbWVtbzMoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgRU1QVFkgPSBTeW1ib2woKTtcbiAgICAgIGNvbnN0IHNlbGVjdFZhbHVlID0gKFt2YWx1ZSwgcHJldlNsaWNlXSkgPT4ge1xuICAgICAgICBpZiAocHJldlNsaWNlID09PSBFTVBUWSkge1xuICAgICAgICAgIHJldHVybiBzZWxlY3Rvcih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2xpY2UgPSBzZWxlY3Rvcih2YWx1ZSwgcHJldlNsaWNlKTtcbiAgICAgICAgcmV0dXJuIGVxdWFsaXR5Rm4ocHJldlNsaWNlLCBzbGljZSkgPyBwcmV2U2xpY2UgOiBzbGljZTtcbiAgICAgIH07XG4gICAgICBjb25zdCBkZXJpdmVkQXRvbSA9IGF0b20oKGdldCkgPT4ge1xuICAgICAgICBjb25zdCBwcmV2ID0gZ2V0KGRlcml2ZWRBdG9tKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBnZXQoYW5BdG9tKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdFZhbHVlKFt2YWx1ZSwgcHJldl0pO1xuICAgICAgfSk7XG4gICAgICBkZXJpdmVkQXRvbS5pbml0ID0gRU1QVFk7XG4gICAgICByZXR1cm4gZGVyaXZlZEF0b207XG4gICAgfSxcbiAgICBhbkF0b20sXG4gICAgc2VsZWN0b3IsXG4gICAgZXF1YWxpdHlGblxuICApO1xufVxuXG5jb25zdCBmcm96ZW5BdG9tcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuY29uc3QgZGVlcEZyZWV6ZSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIE9iamVjdC5mcmVlemUodmFsdWUpO1xuICBjb25zdCBwcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBwcm9wTmFtZXMpIHtcbiAgICBkZWVwRnJlZXplKHZhbHVlW25hbWVdKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuZnVuY3Rpb24gZnJlZXplQXRvbShhbkF0b20pIHtcbiAgaWYgKGZyb3plbkF0b21zLmhhcyhhbkF0b20pKSB7XG4gICAgcmV0dXJuIGFuQXRvbTtcbiAgfVxuICBmcm96ZW5BdG9tcy5hZGQoYW5BdG9tKTtcbiAgY29uc3Qgb3JpZ1JlYWQgPSBhbkF0b20ucmVhZDtcbiAgYW5BdG9tLnJlYWQgPSBmdW5jdGlvbihnZXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZGVlcEZyZWV6ZShvcmlnUmVhZC5jYWxsKHRoaXMsIGdldCwgb3B0aW9ucykpO1xuICB9O1xuICBpZiAoXCJ3cml0ZVwiIGluIGFuQXRvbSkge1xuICAgIGNvbnN0IG9yaWdXcml0ZSA9IGFuQXRvbS53cml0ZTtcbiAgICBhbkF0b20ud3JpdGUgPSBmdW5jdGlvbihnZXQsIHNldCwgLi4uYXJncykge1xuICAgICAgcmV0dXJuIG9yaWdXcml0ZS5jYWxsKFxuICAgICAgICB0aGlzLFxuICAgICAgICBnZXQsXG4gICAgICAgICguLi5zZXRBcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKHNldEFyZ3NbMF0gPT09IGFuQXRvbSkge1xuICAgICAgICAgICAgc2V0QXJnc1sxXSA9IGRlZXBGcmVlemUoc2V0QXJnc1sxXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZXQoLi4uc2V0QXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIC4uLmFyZ3NcbiAgICAgICk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gYW5BdG9tO1xufVxuZnVuY3Rpb24gZnJlZXplQXRvbUNyZWF0b3IoY3JlYXRlQXRvbSkge1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIltERVBSRUNBVEVEXSBmcmVlemVBdG9tQ3JlYXRvciBpcyBkZXByZWNhdGVkLCBkZWZpbmUgaXQgb24gdXNlcnMgZW5kXCJcbiAgICApO1xuICB9XG4gIHJldHVybiAoKC4uLmFyZ3MpID0+IGZyZWV6ZUF0b20oY3JlYXRlQXRvbSguLi5hcmdzKSkpO1xufVxuXG5jb25zdCBnZXRDYWNoZWQkMSA9IChjLCBtLCBrKSA9PiAobS5oYXMoaykgPyBtIDogbS5zZXQoaywgYygpKSkuZ2V0KGspO1xuY29uc3QgY2FjaGUxJDIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1lbW8yJDEgPSAoY3JlYXRlLCBkZXAxLCBkZXAyKSA9PiB7XG4gIGNvbnN0IGNhY2hlMiA9IGdldENhY2hlZCQxKCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjYWNoZTEkMiwgZGVwMSk7XG4gIHJldHVybiBnZXRDYWNoZWQkMShjcmVhdGUsIGNhY2hlMiwgZGVwMik7XG59O1xuY29uc3QgY2FjaGVLZXlGb3JFbXB0eUtleUV4dHJhY3RvciA9IHt9O1xuY29uc3QgaXNXcml0YWJsZSA9IChhdG9tMikgPT4gISFhdG9tMi53cml0ZTtcbmNvbnN0IGlzRnVuY3Rpb24gPSAoeCkgPT4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcbmZ1bmN0aW9uIHNwbGl0QXRvbShhcnJBdG9tLCBrZXlFeHRyYWN0b3IpIHtcbiAgcmV0dXJuIG1lbW8yJDEoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgbWFwcGluZ0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG4gICAgICBjb25zdCBnZXRNYXBwaW5nID0gKGFyciwgcHJldikgPT4ge1xuICAgICAgICBsZXQgbWFwcGluZyA9IG1hcHBpbmdDYWNoZS5nZXQoYXJyKTtcbiAgICAgICAgaWYgKG1hcHBpbmcpIHtcbiAgICAgICAgICByZXR1cm4gbWFwcGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2TWFwcGluZyA9IHByZXYgJiYgbWFwcGluZ0NhY2hlLmdldChwcmV2KTtcbiAgICAgICAgY29uc3QgYXRvbUxpc3QgPSBbXTtcbiAgICAgICAgY29uc3Qga2V5TGlzdCA9IFtdO1xuICAgICAgICBhcnIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBrZXlFeHRyYWN0b3IgPyBrZXlFeHRyYWN0b3IoaXRlbSkgOiBpbmRleDtcbiAgICAgICAgICBrZXlMaXN0W2luZGV4XSA9IGtleTtcbiAgICAgICAgICBjb25zdCBjYWNoZWRBdG9tID0gcHJldk1hcHBpbmcgJiYgcHJldk1hcHBpbmcuYXRvbUxpc3RbcHJldk1hcHBpbmcua2V5TGlzdC5pbmRleE9mKGtleSldO1xuICAgICAgICAgIGlmIChjYWNoZWRBdG9tKSB7XG4gICAgICAgICAgICBhdG9tTGlzdFtpbmRleF0gPSBjYWNoZWRBdG9tO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZWFkID0gKGdldCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJldjIgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICAgICAgY29uc3QgY3VyckFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcyID0gZ2V0TWFwcGluZyhjdXJyQXJyLCBwcmV2MiA9PSBudWxsID8gdm9pZCAwIDogcHJldjIuYXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hcHBpbmcyLmtleUxpc3QuaW5kZXhPZihrZXkpO1xuICAgICAgICAgICAgaWYgKGluZGV4MiA8IDAgfHwgaW5kZXgyID49IGN1cnJBcnIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHByZXZJdGVtID0gYXJyW2dldE1hcHBpbmcoYXJyKS5rZXlMaXN0LmluZGV4T2Yoa2V5KV07XG4gICAgICAgICAgICAgIGlmIChwcmV2SXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2SXRlbTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzcGxpdEF0b206IGluZGV4IG91dCBvZiBib3VuZHMgZm9yIHJlYWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VyckFycltpbmRleDJdO1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3Qgd3JpdGUgPSAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJldjIgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICAgICAgY29uc3QgYXJyMiA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcyID0gZ2V0TWFwcGluZyhhcnIyLCBwcmV2MiA9PSBudWxsID8gdm9pZCAwIDogcHJldjIuYXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hcHBpbmcyLmtleUxpc3QuaW5kZXhPZihrZXkpO1xuICAgICAgICAgICAgaWYgKGluZGV4MiA8IDAgfHwgaW5kZXgyID49IGFycjIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInNwbGl0QXRvbTogaW5kZXggb3V0IG9mIGJvdW5kcyBmb3Igd3JpdGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXh0SXRlbSA9IGlzRnVuY3Rpb24odXBkYXRlKSA/IHVwZGF0ZShhcnIyW2luZGV4Ml0pIDogdXBkYXRlO1xuICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMoYXJyMltpbmRleDJdLCBuZXh0SXRlbSkpIHtcbiAgICAgICAgICAgICAgc2V0KGFyckF0b20sIFtcbiAgICAgICAgICAgICAgICAuLi5hcnIyLnNsaWNlKDAsIGluZGV4MiksXG4gICAgICAgICAgICAgICAgbmV4dEl0ZW0sXG4gICAgICAgICAgICAgICAgLi4uYXJyMi5zbGljZShpbmRleDIgKyAxKVxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGF0b21MaXN0W2luZGV4XSA9IGlzV3JpdGFibGUoYXJyQXRvbSkgPyBhdG9tKHJlYWQsIHdyaXRlKSA6IGF0b20ocmVhZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocHJldk1hcHBpbmcgJiYgcHJldk1hcHBpbmcua2V5TGlzdC5sZW5ndGggPT09IGtleUxpc3QubGVuZ3RoICYmIHByZXZNYXBwaW5nLmtleUxpc3QuZXZlcnkoKHgsIGkpID0+IHggPT09IGtleUxpc3RbaV0pKSB7XG4gICAgICAgICAgbWFwcGluZyA9IHByZXZNYXBwaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hcHBpbmcgPSB7IGFyciwgYXRvbUxpc3QsIGtleUxpc3QgfTtcbiAgICAgICAgfVxuICAgICAgICBtYXBwaW5nQ2FjaGUuc2V0KGFyciwgbWFwcGluZyk7XG4gICAgICAgIHJldHVybiBtYXBwaW5nO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG1hcHBpbmdBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXYgPSBnZXQobWFwcGluZ0F0b20pO1xuICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgIGNvbnN0IG1hcHBpbmcgPSBnZXRNYXBwaW5nKGFyciwgcHJldiA9PSBudWxsID8gdm9pZCAwIDogcHJldi5hcnIpO1xuICAgICAgICByZXR1cm4gbWFwcGluZztcbiAgICAgIH0pO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIG1hcHBpbmdBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBtYXBwaW5nQXRvbS5pbml0ID0gdm9pZCAwO1xuICAgICAgY29uc3Qgc3BsaXR0ZWRBdG9tID0gaXNXcml0YWJsZShhcnJBdG9tKSA/IGF0b20oXG4gICAgICAgIChnZXQpID0+IGdldChtYXBwaW5nQXRvbSkuYXRvbUxpc3QsXG4gICAgICAgIChnZXQsIHNldCwgYWN0aW9uKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0KHNwbGl0dGVkQXRvbSkuaW5kZXhPZihhY3Rpb24uYXRvbSk7XG4gICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyID0gZ2V0KGFyckF0b20pO1xuICAgICAgICAgICAgICAgIHNldChhcnJBdG9tLCBbXG4gICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJpbnNlcnRcIjoge1xuICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGFjdGlvbi5iZWZvcmUgPyBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5iZWZvcmUpIDogZ2V0KHNwbGl0dGVkQXRvbSkubGVuZ3RoO1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IGdldChhcnJBdG9tKTtcbiAgICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleClcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgICAgY29uc3QgaW5kZXgxID0gZ2V0KHNwbGl0dGVkQXRvbSkuaW5kZXhPZihhY3Rpb24uYXRvbSk7XG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IGFjdGlvbi5iZWZvcmUgPyBnZXQoc3BsaXR0ZWRBdG9tKS5pbmRleE9mKGFjdGlvbi5iZWZvcmUpIDogZ2V0KHNwbGl0dGVkQXRvbSkubGVuZ3RoO1xuICAgICAgICAgICAgICBpZiAoaW5kZXgxID49IDAgJiYgaW5kZXgyID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBnZXQoYXJyQXRvbSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4MSA8IGluZGV4Mikge1xuICAgICAgICAgICAgICAgICAgc2V0KGFyckF0b20sIFtcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKDAsIGluZGV4MSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDEgKyAxLCBpbmRleDIpLFxuICAgICAgICAgICAgICAgICAgICBhcnJbaW5kZXgxXSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYXJyLnNsaWNlKGluZGV4MilcbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzZXQoYXJyQXRvbSwgW1xuICAgICAgICAgICAgICAgICAgICAuLi5hcnIuc2xpY2UoMCwgaW5kZXgyKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyW2luZGV4MV0sXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDIsIGluZGV4MSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmFyci5zbGljZShpbmRleDEgKyAxKVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSA6IGF0b20oKGdldCkgPT4gZ2V0KG1hcHBpbmdBdG9tKS5hdG9tTGlzdCk7XG4gICAgICByZXR1cm4gc3BsaXR0ZWRBdG9tO1xuICAgIH0sXG4gICAgYXJyQXRvbSxcbiAgICBrZXlFeHRyYWN0b3IgfHwgY2FjaGVLZXlGb3JFbXB0eUtleUV4dHJhY3RvclxuICApO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aERlZmF1bHQoZ2V0RGVmYXVsdCkge1xuICBjb25zdCBFTVBUWSA9IFN5bWJvbCgpO1xuICBjb25zdCBvdmVyd3JpdHRlbkF0b20gPSBhdG9tKEVNUFRZKTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgb3ZlcndyaXR0ZW5BdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gIH1cbiAgY29uc3QgYW5BdG9tID0gYXRvbShcbiAgICAoZ2V0LCBvcHRpb25zKSA9PiB7XG4gICAgICBjb25zdCBvdmVyd3JpdHRlbiA9IGdldChvdmVyd3JpdHRlbkF0b20pO1xuICAgICAgaWYgKG92ZXJ3cml0dGVuICE9PSBFTVBUWSkge1xuICAgICAgICByZXR1cm4gb3ZlcndyaXR0ZW47XG4gICAgICB9XG4gICAgICByZXR1cm4gZ2V0RGVmYXVsdChnZXQsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgKGdldCwgc2V0LCB1cGRhdGUpID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlKGdldChhbkF0b20pKSA6IHVwZGF0ZTtcbiAgICAgIHNldChvdmVyd3JpdHRlbkF0b20sIG5ld1ZhbHVlID09PSBSRVNFVCA/IEVNUFRZIDogbmV3VmFsdWUpO1xuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGFuQXRvbTtcbn1cblxuY29uc3QgaXNQcm9taXNlTGlrZSQzID0gKHgpID0+IHR5cGVvZiAoeCA9PSBudWxsID8gdm9pZCAwIDogeC50aGVuKSA9PT0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gd2l0aFN0b3JhZ2VWYWxpZGF0b3IodmFsaWRhdG9yKSB7XG4gIHJldHVybiAodW5rbm93blN0b3JhZ2UpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID0ge1xuICAgICAgLi4udW5rbm93blN0b3JhZ2UsXG4gICAgICBnZXRJdGVtOiAoa2V5LCBpbml0aWFsVmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGUgPSAodmFsdWUyKSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlMjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB1bmtub3duU3RvcmFnZS5nZXRJdGVtKGtleSwgaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UkMyh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUudGhlbih2YWxpZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBzdG9yYWdlO1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSlNPTlN0b3JhZ2UoZ2V0U3RyaW5nU3RvcmFnZSA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59LCBvcHRpb25zKSB7XG4gIHZhciBfYTtcbiAgbGV0IGxhc3RTdHI7XG4gIGxldCBsYXN0VmFsdWU7XG4gIGNvbnN0IHN0b3JhZ2UgPSB7XG4gICAgZ2V0SXRlbTogKGtleSwgaW5pdGlhbFZhbHVlKSA9PiB7XG4gICAgICB2YXIgX2EyLCBfYjtcbiAgICAgIGNvbnN0IHBhcnNlID0gKHN0cjIpID0+IHtcbiAgICAgICAgc3RyMiA9IHN0cjIgfHwgXCJcIjtcbiAgICAgICAgaWYgKGxhc3RTdHIgIT09IHN0cjIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gSlNPTi5wYXJzZShzdHIyLCBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJldml2ZXIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxhc3RTdHIgPSBzdHIyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICB9O1xuICAgICAgY29uc3Qgc3RyID0gKF9iID0gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5nZXRJdGVtKGtleSkpICE9IG51bGwgPyBfYiA6IG51bGw7XG4gICAgICBpZiAoaXNQcm9taXNlTGlrZSQzKHN0cikpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50aGVuKHBhcnNlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJzZShzdHIpO1xuICAgIH0sXG4gICAgc2V0SXRlbTogKGtleSwgbmV3VmFsdWUpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5zZXRJdGVtKFxuICAgICAgICBrZXksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlLCBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnJlcGxhY2VyKVxuICAgICAgKTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IChrZXkpID0+IHtcbiAgICAgIHZhciBfYTI7XG4gICAgICByZXR1cm4gKF9hMiA9IGdldFN0cmluZ1N0b3JhZ2UoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5yZW1vdmVJdGVtKGtleSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVIYW5kbGVTdWJzY3JpYmUgPSAoc3Vic2NyaWJlcjIpID0+IChrZXksIGNhbGxiYWNrLCBpbml0aWFsVmFsdWUpID0+IHN1YnNjcmliZXIyKGtleSwgKHYpID0+IHtcbiAgICBsZXQgbmV3VmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIG5ld1ZhbHVlID0gSlNPTi5wYXJzZSh2IHx8IFwiXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG5ld1ZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgIH1cbiAgICBjYWxsYmFjayhuZXdWYWx1ZSk7XG4gIH0pO1xuICBsZXQgc3Vic2NyaWJlcjtcbiAgdHJ5IHtcbiAgICBzdWJzY3JpYmVyID0gKF9hID0gZ2V0U3RyaW5nU3RvcmFnZSgpKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3Vic2NyaWJlO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgaWYgKCFzdWJzY3JpYmVyICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgJiYgd2luZG93LlN0b3JhZ2UpIHtcbiAgICBzdWJzY3JpYmVyID0gKGtleSwgY2FsbGJhY2spID0+IHtcbiAgICAgIGlmICghKGdldFN0cmluZ1N0b3JhZ2UoKSBpbnN0YW5jZW9mIHdpbmRvdy5TdG9yYWdlKSkge1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RvcmFnZUV2ZW50Q2FsbGJhY2sgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5zdG9yYWdlQXJlYSA9PT0gZ2V0U3RyaW5nU3RvcmFnZSgpICYmIGUua2V5ID09PSBrZXkpIHtcbiAgICAgICAgICBjYWxsYmFjayhlLm5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBzdG9yYWdlRXZlbnRDYWxsYmFjayk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgc3RvcmFnZUV2ZW50Q2FsbGJhY2spO1xuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIGlmIChzdWJzY3JpYmVyKSB7XG4gICAgc3RvcmFnZS5zdWJzY3JpYmUgPSBjcmVhdGVIYW5kbGVTdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gIH1cbiAgcmV0dXJuIHN0b3JhZ2U7XG59XG5jb25zdCBkZWZhdWx0U3RvcmFnZSA9IGNyZWF0ZUpTT05TdG9yYWdlKCk7XG5mdW5jdGlvbiBhdG9tV2l0aFN0b3JhZ2Uoa2V5LCBpbml0aWFsVmFsdWUsIHN0b3JhZ2UgPSBkZWZhdWx0U3RvcmFnZSwgb3B0aW9ucykge1xuICBjb25zdCBnZXRPbkluaXQgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmdldE9uSW5pdDtcbiAgY29uc3QgYmFzZUF0b20gPSBhdG9tKFxuICAgIGdldE9uSW5pdCA/IHN0b3JhZ2UuZ2V0SXRlbShrZXksIGluaXRpYWxWYWx1ZSkgOiBpbml0aWFsVmFsdWVcbiAgKTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgYmFzZUF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgfVxuICBiYXNlQXRvbS5vbk1vdW50ID0gKHNldEF0b20pID0+IHtcbiAgICBzZXRBdG9tKHN0b3JhZ2UuZ2V0SXRlbShrZXksIGluaXRpYWxWYWx1ZSkpO1xuICAgIGxldCB1bnN1YjtcbiAgICBpZiAoc3RvcmFnZS5zdWJzY3JpYmUpIHtcbiAgICAgIHVuc3ViID0gc3RvcmFnZS5zdWJzY3JpYmUoa2V5LCBzZXRBdG9tLCBpbml0aWFsVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5zdWI7XG4gIH07XG4gIGNvbnN0IGFuQXRvbSA9IGF0b20oXG4gICAgKGdldCkgPT4gZ2V0KGJhc2VBdG9tKSxcbiAgICAoZ2V0LCBzZXQsIHVwZGF0ZSkgPT4ge1xuICAgICAgY29uc3QgbmV4dFZhbHVlID0gdHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlKGdldChiYXNlQXRvbSkpIDogdXBkYXRlO1xuICAgICAgaWYgKG5leHRWYWx1ZSA9PT0gUkVTRVQpIHtcbiAgICAgICAgc2V0KGJhc2VBdG9tLCBpbml0aWFsVmFsdWUpO1xuICAgICAgICByZXR1cm4gc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNQcm9taXNlTGlrZSQzKG5leHRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG5leHRWYWx1ZS50aGVuKChyZXNvbHZlZFZhbHVlKSA9PiB7XG4gICAgICAgICAgc2V0KGJhc2VBdG9tLCByZXNvbHZlZFZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gc3RvcmFnZS5zZXRJdGVtKGtleSwgcmVzb2x2ZWRWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgc2V0KGJhc2VBdG9tLCBuZXh0VmFsdWUpO1xuICAgICAgcmV0dXJuIHN0b3JhZ2Uuc2V0SXRlbShrZXksIG5leHRWYWx1ZSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gYW5BdG9tO1xufVxuXG5jb25zdCBpc1Byb21pc2VMaWtlJDIgPSAoeCkgPT4gdHlwZW9mICh4ID09IG51bGwgPyB2b2lkIDAgOiB4LnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG5mdW5jdGlvbiBhdG9tV2l0aE9ic2VydmFibGUoZ2V0T2JzZXJ2YWJsZSwgb3B0aW9ucykge1xuICBjb25zdCByZXR1cm5SZXN1bHREYXRhID0gKHJlc3VsdCkgPT4ge1xuICAgIGlmIChcImVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHRocm93IHJlc3VsdC5lO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LmQ7XG4gIH07XG4gIGNvbnN0IG9ic2VydmFibGVSZXN1bHRBdG9tID0gYXRvbSgoZ2V0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBvYnNlcnZhYmxlID0gZ2V0T2JzZXJ2YWJsZShnZXQpO1xuICAgIGNvbnN0IGl0c2VsZiA9IChfYSA9IG9ic2VydmFibGVbU3ltYm9sLm9ic2VydmFibGVdKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChvYnNlcnZhYmxlKTtcbiAgICBpZiAoaXRzZWxmKSB7XG4gICAgICBvYnNlcnZhYmxlID0gaXRzZWxmO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBtYWtlUGVuZGluZyA9ICgpID0+IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICByZXNvbHZlID0gcjtcbiAgICB9KTtcbiAgICBjb25zdCBpbml0aWFsUmVzdWx0ID0gb3B0aW9ucyAmJiBcImluaXRpYWxWYWx1ZVwiIGluIG9wdGlvbnMgPyB7XG4gICAgICBkOiB0eXBlb2Ygb3B0aW9ucy5pbml0aWFsVmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IG9wdGlvbnMuaW5pdGlhbFZhbHVlKCkgOiBvcHRpb25zLmluaXRpYWxWYWx1ZVxuICAgIH0gOiBtYWtlUGVuZGluZygpO1xuICAgIGxldCBzZXRSZXN1bHQ7XG4gICAgbGV0IGxhc3RSZXN1bHQ7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAocmVzdWx0KSA9PiB7XG4gICAgICBsYXN0UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgcmVzb2x2ZSA9PSBudWxsID8gdm9pZCAwIDogcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgc2V0UmVzdWx0ID09IG51bGwgPyB2b2lkIDAgOiBzZXRSZXN1bHQocmVzdWx0KTtcbiAgICB9O1xuICAgIGxldCBzdWJzY3JpcHRpb247XG4gICAgbGV0IHRpbWVyO1xuICAgIGNvbnN0IGlzTm90TW91bnRlZCA9ICgpID0+ICFzZXRSZXN1bHQ7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24gPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgICBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IChkKSA9PiBsaXN0ZW5lcih7IGQgfSksXG4gICAgICAgIGVycm9yOiAoZSkgPT4gbGlzdGVuZXIoeyBlIH0pLFxuICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChpc05vdE1vdW50ZWQoKSAmJiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy51bnN0YWJsZV90aW1lb3V0KSkge1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodW5zdWJzY3JpYmUsIG9wdGlvbnMudW5zdGFibGVfdGltZW91dCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBzdGFydCgpO1xuICAgIGNvbnN0IHJlc3VsdEF0b20gPSBhdG9tKGxhc3RSZXN1bHQgfHwgaW5pdGlhbFJlc3VsdCk7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICByZXN1bHRBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIHJlc3VsdEF0b20ub25Nb3VudCA9ICh1cGRhdGUpID0+IHtcbiAgICAgIHNldFJlc3VsdCA9IHVwZGF0ZTtcbiAgICAgIGlmIChsYXN0UmVzdWx0KSB7XG4gICAgICAgIHVwZGF0ZShsYXN0UmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBzZXRSZXN1bHQgPSB2b2lkIDA7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnVuc3RhYmxlX3RpbWVvdXQpIHtcbiAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQodW5zdWJzY3JpYmUsIG9wdGlvbnMudW5zdGFibGVfdGltZW91dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBbcmVzdWx0QXRvbSwgb2JzZXJ2YWJsZSwgbWFrZVBlbmRpbmcsIHN0YXJ0LCBpc05vdE1vdW50ZWRdO1xuICB9KTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgb2JzZXJ2YWJsZVJlc3VsdEF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgfVxuICBjb25zdCBvYnNlcnZhYmxlQXRvbSA9IGF0b20oXG4gICAgKGdldCkgPT4ge1xuICAgICAgY29uc3QgW3Jlc3VsdEF0b21dID0gZ2V0KG9ic2VydmFibGVSZXN1bHRBdG9tKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldChyZXN1bHRBdG9tKTtcbiAgICAgIGlmIChpc1Byb21pc2VMaWtlJDIocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4ocmV0dXJuUmVzdWx0RGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuUmVzdWx0RGF0YShyZXN1bHQpO1xuICAgIH0sXG4gICAgKGdldCwgc2V0LCBkYXRhKSA9PiB7XG4gICAgICBjb25zdCBbcmVzdWx0QXRvbSwgb2JzZXJ2YWJsZSwgbWFrZVBlbmRpbmcsIHN0YXJ0LCBpc05vdE1vdW50ZWRdID0gZ2V0KG9ic2VydmFibGVSZXN1bHRBdG9tKTtcbiAgICAgIGlmIChcIm5leHRcIiBpbiBvYnNlcnZhYmxlKSB7XG4gICAgICAgIGlmIChpc05vdE1vdW50ZWQoKSkge1xuICAgICAgICAgIHNldChyZXN1bHRBdG9tLCBtYWtlUGVuZGluZygpKTtcbiAgICAgICAgICBzdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIG9ic2VydmFibGUubmV4dChkYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9ic2VydmFibGUgaXMgbm90IHN1YmplY3RcIik7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gb2JzZXJ2YWJsZUF0b207XG59XG5cbmNvbnN0IGNhY2hlMSQxID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBtZW1vMSA9IChjcmVhdGUsIGRlcDEpID0+IChjYWNoZTEkMS5oYXMoZGVwMSkgPyBjYWNoZTEkMSA6IGNhY2hlMSQxLnNldChkZXAxLCBjcmVhdGUoKSkpLmdldChkZXAxKTtcbmNvbnN0IGlzUHJvbWlzZUxpa2UkMSA9IChwKSA9PiB0eXBlb2YgKHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAudGhlbikgPT09IFwiZnVuY3Rpb25cIjtcbmNvbnN0IExPQURJTkcgPSB7IHN0YXRlOiBcImxvYWRpbmdcIiB9O1xuZnVuY3Rpb24gbG9hZGFibGUoYW5BdG9tKSB7XG4gIHJldHVybiBtZW1vMSgoKSA9PiB7XG4gICAgY29uc3QgbG9hZGFibGVDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0IHJlZnJlc2hBdG9tID0gYXRvbSgwKTtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGRlcml2ZWRBdG9tID0gYXRvbShcbiAgICAgIChnZXQsIHsgc2V0U2VsZiB9KSA9PiB7XG4gICAgICAgIGdldChyZWZyZXNoQXRvbSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YWx1ZSA9IGdldChhbkF0b20pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBcImhhc0Vycm9yXCIsIGVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1Byb21pc2VMaWtlJDEodmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwiaGFzRGF0YVwiLCBkYXRhOiB2YWx1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgY2FjaGVkMSA9IGxvYWRhYmxlQ2FjaGUuZ2V0KHByb21pc2UpO1xuICAgICAgICBpZiAoY2FjaGVkMSkge1xuICAgICAgICAgIHJldHVybiBjYWNoZWQxO1xuICAgICAgICB9XG4gICAgICAgIHByb21pc2UudGhlbihcbiAgICAgICAgICAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgeyBzdGF0ZTogXCJoYXNEYXRhXCIsIGRhdGEgfSk7XG4gICAgICAgICAgICBzZXRTZWxmKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGxvYWRhYmxlQ2FjaGUuc2V0KHByb21pc2UsIHsgc3RhdGU6IFwiaGFzRXJyb3JcIiwgZXJyb3IgfSk7XG4gICAgICAgICAgICBzZXRTZWxmKCk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYWNoZWQyID0gbG9hZGFibGVDYWNoZS5nZXQocHJvbWlzZSk7XG4gICAgICAgIGlmIChjYWNoZWQyKSB7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlZDI7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZGFibGVDYWNoZS5zZXQocHJvbWlzZSwgTE9BRElORyk7XG4gICAgICAgIHJldHVybiBMT0FESU5HO1xuICAgICAgfSxcbiAgICAgIChfZ2V0LCBzZXQpID0+IHtcbiAgICAgICAgc2V0KHJlZnJlc2hBdG9tLCAoYykgPT4gYyArIDEpO1xuICAgICAgfVxuICAgICk7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBkZXJpdmVkQXRvbS5kZWJ1Z1ByaXZhdGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYXRvbSgoZ2V0KSA9PiBnZXQoZGVyaXZlZEF0b20pKTtcbiAgfSwgYW5BdG9tKTtcbn1cblxuY29uc3QgZ2V0Q2FjaGVkID0gKGMsIG0sIGspID0+IChtLmhhcyhrKSA/IG0gOiBtLnNldChrLCBjKCkpKS5nZXQoayk7XG5jb25zdCBjYWNoZTEgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG1lbW8yID0gKGNyZWF0ZSwgZGVwMSwgZGVwMikgPT4ge1xuICBjb25zdCBjYWNoZTIgPSBnZXRDYWNoZWQoKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIGNhY2hlMSwgZGVwMSk7XG4gIHJldHVybiBnZXRDYWNoZWQoY3JlYXRlLCBjYWNoZTIsIGRlcDIpO1xufTtcbmNvbnN0IGlzUHJvbWlzZUxpa2UgPSAocCkgPT4gdHlwZW9mIChwID09IG51bGwgPyB2b2lkIDAgOiBwLnRoZW4pID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBkZWZhdWx0RmFsbGJhY2sgPSAoKSA9PiB2b2lkIDA7XG5mdW5jdGlvbiB1bndyYXAoYW5BdG9tLCBmYWxsYmFjayA9IGRlZmF1bHRGYWxsYmFjaykge1xuICByZXR1cm4gbWVtbzIoXG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZUVycm9yQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICAgIGNvbnN0IHByb21pc2VSZXN1bHRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgICAgY29uc3QgcmVmcmVzaEF0b20gPSBhdG9tKDApO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9taXNlQW5kVmFsdWVBdG9tID0gYXRvbShcbiAgICAgICAgKGdldCwgeyBzZXRTZWxmIH0pID0+IHtcbiAgICAgICAgICBnZXQocmVmcmVzaEF0b20pO1xuICAgICAgICAgIGNvbnN0IHByZXYgPSBnZXQocHJvbWlzZUFuZFZhbHVlQXRvbSk7XG4gICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGdldChhbkF0b20pO1xuICAgICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdjogcHJvbWlzZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvbWlzZSAhPT0gKHByZXYgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXYucCkpIHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihcbiAgICAgICAgICAgICAgKHYpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9taXNlUmVzdWx0Q2FjaGUuc2V0KHByb21pc2UsIHYpO1xuICAgICAgICAgICAgICAgIHNldFNlbGYoKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9taXNlRXJyb3JDYWNoZS5zZXQocHJvbWlzZSwgZSk7XG4gICAgICAgICAgICAgICAgc2V0U2VsZigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvbWlzZUVycm9yQ2FjaGUuaGFzKHByb21pc2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBwcm9taXNlRXJyb3JDYWNoZS5nZXQocHJvbWlzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0Q2FjaGUuaGFzKHByb21pc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBwOiBwcm9taXNlLFxuICAgICAgICAgICAgICB2OiBwcm9taXNlUmVzdWx0Q2FjaGUuZ2V0KHByb21pc2UpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJldiAmJiBcInZcIiBpbiBwcmV2KSB7XG4gICAgICAgICAgICByZXR1cm4geyBwOiBwcm9taXNlLCBmOiBmYWxsYmFjayhwcmV2LnYpLCB2OiBwcmV2LnYgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgcDogcHJvbWlzZSwgZjogZmFsbGJhY2soKSB9O1xuICAgICAgICB9LFxuICAgICAgICAoX2dldCwgc2V0KSA9PiB7XG4gICAgICAgICAgc2V0KHJlZnJlc2hBdG9tLCAoYykgPT4gYyArIDEpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcHJvbWlzZUFuZFZhbHVlQXRvbS5pbml0ID0gdm9pZCAwO1xuICAgICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHByb21pc2VBbmRWYWx1ZUF0b20uZGVidWdQcml2YXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdG9tKFxuICAgICAgICAoZ2V0KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQocHJvbWlzZUFuZFZhbHVlQXRvbSk7XG4gICAgICAgICAgaWYgKFwiZlwiIGluIHN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLnY7XG4gICAgICAgIH0sXG4gICAgICAgIChfZ2V0LCBzZXQsIC4uLmFyZ3MpID0+IHNldChhbkF0b20sIC4uLmFyZ3MpXG4gICAgICApO1xuICAgIH0sXG4gICAgYW5BdG9tLFxuICAgIGZhbGxiYWNrXG4gICk7XG59XG5cbmZ1bmN0aW9uIGF0b21XaXRoUmVmcmVzaChyZWFkLCB3cml0ZSkge1xuICBjb25zdCByZWZyZXNoQXRvbSA9IGF0b20oMCk7XG4gIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIHJlZnJlc2hBdG9tLmRlYnVnUHJpdmF0ZSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIGF0b20oXG4gICAgKGdldCwgb3B0aW9ucykgPT4ge1xuICAgICAgZ2V0KHJlZnJlc2hBdG9tKTtcbiAgICAgIHJldHVybiByZWFkKGdldCwgb3B0aW9ucyk7XG4gICAgfSxcbiAgICAoZ2V0LCBzZXQsIC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXQocmVmcmVzaEF0b20sIChjKSA9PiBjICsgMSk7XG4gICAgICB9IGVsc2UgaWYgKHdyaXRlKSB7XG4gICAgICAgIHJldHVybiB3cml0ZShnZXQsIHNldCwgLi4uYXJncyk7XG4gICAgICB9IGVsc2UgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlZnJlc2ggbXVzdCBiZSBjYWxsZWQgd2l0aG91dCBhcmd1bWVudHNcIik7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG5mdW5jdGlvbiBhdG9tV2l0aExhenkobWFrZUluaXRpYWwpIHtcbiAgY29uc3QgYSA9IGF0b20odm9pZCAwKTtcbiAgZGVsZXRlIGEuaW5pdDtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIFwiaW5pdFwiLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIG1ha2VJbml0aWFsKCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbmV4cG9ydCB7IFJFU0VULCBhdG9tRmFtaWx5LCBhdG9tV2l0aERlZmF1bHQsIGF0b21XaXRoTGF6eSwgYXRvbVdpdGhPYnNlcnZhYmxlLCBhdG9tV2l0aFJlZHVjZXIsIGF0b21XaXRoUmVmcmVzaCwgYXRvbVdpdGhSZXNldCwgYXRvbVdpdGhTdG9yYWdlLCBjcmVhdGVKU09OU3RvcmFnZSwgZnJlZXplQXRvbSwgZnJlZXplQXRvbUNyZWF0b3IsIGxvYWRhYmxlLCBzZWxlY3RBdG9tLCBzcGxpdEF0b20sIHdpdGhTdG9yYWdlVmFsaWRhdG9yIGFzIHVuc3RhYmxlX3dpdGhTdG9yYWdlVmFsaWRhdG9yLCB1bndyYXAgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/jotai@2.15.0_@types+react@19.0.7_react@19.0.0/node_modules/jotai/esm/vanilla/utils.mjs\n");

/***/ })

};
;