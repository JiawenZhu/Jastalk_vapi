(()=>{var e={};e.id=110,e.ids=[110],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5264:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(1223),t(7139),t(5866);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["results",{children:["[conversationId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1223)),"/Users/jiawenzhu/Developer/Jastalk_vapi/next/app/results/[conversationId]/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7139)),"/Users/jiawenzhu/Developer/Jastalk_vapi/next/app/layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/jiawenzhu/Developer/Jastalk_vapi/next/app/results/[conversationId]/page.jsx"],m="/results/[conversationId]/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/results/[conversationId]/page",pathname:"/results/[conversationId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7109:()=>{},8075:(e,s,t)=>{Promise.resolve().then(t.bind(t,8434))},213:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8434:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(326),a=t(7577),i=t(5047),n=t(7926);let l=(0,n.Z)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),o=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),d=("undefined"!=typeof process&&process.env?.NEXT_PUBLIC_SERVER_URL||"").replace(/\/$/,"");function c(){let e=(0,i.useParams)(),s=Array.isArray(e?.conversationId)?e.conversationId[0]:e?.conversationId,[t,n]=(0,a.useState)(!0),[c,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),[p,v]=(0,a.useState)(null),[g,j]=(0,a.useState)(null),y=async()=>{if(s){n(!0),h("");try{let e=await fetch(`${d}/recordings?conversation_id=${s}`);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();u(t||[])}catch(e){h(e?.message||"加载录制失败")}finally{n(!1)}}},N=c?.[0],f=async e=>{try{let s=await fetch(`${d}/recordings/${e}/download-link`);if(!s.ok)throw Error("无法获取下载链接");let{download_link:t}=await s.json();t&&window.open(t,"_blank")}catch(e){console.error(e)}};return r.jsx("main",{className:"min-h-screen bg-white p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"面试结果"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["会话：",s]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:y,className:"inline-flex items-center gap-2 bg-gray-100 px-3 py-2 rounded",children:[r.jsx(l,{className:"h-4 w-4"})," 刷新"]}),N&&(0,r.jsxs)("button",{onClick:()=>f(N.recording_id),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-3 py-2 rounded",children:[r.jsx(o,{className:"h-4 w-4"})," 下载最新录制"]})]}),p&&(0,r.jsxs)("div",{className:"mt-4 border rounded p-4 bg-gray-50",children:[r.jsx("div",{className:"font-medium mb-2",children:"面试元数据"}),p.role&&(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["职位：",p.role]}),p.interview_type&&(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["面试类型：",p.interview_type]}),Array.isArray(p.questions)&&p.questions.length>0&&(0,r.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:[r.jsx("div",{className:"font-medium",children:"题目："}),r.jsx("ol",{className:"list-decimal ms-5",children:p.questions.map((e,s)=>r.jsx("li",{children:e},s))})]})]}),t?r.jsx("p",{className:"mt-8 text-gray-500",children:"加载中…"}):x?r.jsx("p",{className:"mt-8 text-red-600",children:x}):0===c.length?r.jsx("p",{className:"mt-8 text-gray-500",children:"尚未找到录制。"}):r.jsx("div",{className:"mt-6 grid gap-6",children:c.map(e=>(0,r.jsxs)("div",{className:"border rounded p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium",children:["录制 ",e.recording_id.slice(0,8)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["状态：",e.status,"，创建时间：",new Date(e.created_at).toLocaleString()]})]}),r.jsx("button",{onClick:()=>f(e.recording_id),className:"text-blue-600 text-sm",children:"下载"})]}),"ready"===e.status&&r.jsx(m,{recordingId:e.recording_id})]},e.recording_id))}),g&&(0,r.jsxs)("div",{className:"mt-8 border rounded p-4",children:[r.jsx("div",{className:"font-semibold mb-2",children:"面试评分总结"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["平均得分：",g.average_score,"/100"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 mt-1",children:["答题数：",g.answered_questions," / ",g.total_questions]}),r.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"总体反馈："}),r.jsx("div",{className:"text-sm whitespace-pre-wrap mt-1",children:g.overall_feedback}),Array.isArray(g.question_scores)&&g.question_scores.length>0&&(0,r.jsxs)("div",{className:"mt-3",children:[r.jsx("div",{className:"font-medium",children:"题目得分明细"}),r.jsx("ol",{className:"list-decimal ms-5 mt-1",children:g.question_scores.map((e,s)=>(0,r.jsxs)("li",{className:"text-sm",children:[r.jsx("div",{className:"font-medium",children:e.question}),(0,r.jsxs)("div",{className:"text-gray-600",children:["得分：",e.score]})]},s))})]})]})]})})}function m({recordingId:e}){let[s,t]=(0,a.useState)("");if(!s)return null;let i=/\.mp4(\?|$)/i.test(s)||/video/.test(s);return r.jsx("div",{className:"mt-3",children:i?r.jsx("video",{src:s,controls:!0,className:"w-full rounded"}):r.jsx("audio",{src:s,controls:!0,className:"w-full"})})}},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},7139:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>a});var r=t(9510);t(7272);let a={title:"Jastalk Vapi Next",description:"AI-powered voice interview agent (Next.js)"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:e})})}},1223:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/jiawenzhu/Developer/Jastalk_vapi/next/app/results/[conversationId]/page.jsx#default`)},7272:()=>{},7926:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var n=(e,s)=>{let t=(0,r.forwardRef)(({color:t="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,children:d,...c},m)=>(0,r.createElement)("svg",{ref:m,...a,width:n,height:n,stroke:t,strokeWidth:o?24*Number(l)/Number(n):l,className:`lucide lucide-${i(e)}`,...c},[...s.map(([e,s])=>(0,r.createElement)(e,s)),...(Array.isArray(d)?d:[d])||[]]));return t.displayName=`${e}`,t}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[819],()=>t(5264));module.exports=r})();